"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6703],{6703:(Ce,A,p)=>{p.r(A),p.d(A,{HomePageModule:()=>_e});var c=p(6019),l=p(2651),f=p(9010),h=p(4762),t=p(865),v=p(2568),y=p(8621),F=p(6964),m=p(6952);function R(i,r){1&i&&(t.TgZ(0,"div",6),t.TgZ(1,"p",7),t._uU(2,"L"),t.qZA(),t.qZA())}function H(i,r){1&i&&(t.TgZ(0,"div",6),t.TgZ(1,"p",7),t._uU(2,"L"),t.qZA(),t.qZA())}let J=(()=>{class i{constructor(e){this.storage=e}ngOnInit(){return(0,h.mG)(this,void 0,void 0,function*(){const e=yield this.storage.get(this.storageName);this.toggle=null!=e?e:this.defaultState})}setToggle(e){this.toggle=e,this.storage.set(this.storageName,e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(y.K))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-settings-toggle"]],inputs:{name:"name",trueToggle:"trueToggle",falseToggle:"falseToggle",storageName:"storageName",defaultState:"defaultState"},decls:13,vars:11,consts:[[1,"setting-container"],[1,"prompt-text","toggle-header"],[1,"toggle-container",3,"click"],["class","trueBox",4,"ngIf"],[1,"toggle-text"],[1,"toggle-text","last"],[1,"trueBox"],[1,"L"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"p",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2),t.NdJ("click",function(){return n.setToggle(!0)}),t.TgZ(4,"div"),t.YNc(5,R,3,0,"div",3),t.qZA(),t.TgZ(6,"p",4),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"div",2),t.NdJ("click",function(){return n.setToggle(!1)}),t.TgZ(9,"div"),t.YNc(10,H,3,0,"div",3),t.qZA(),t.TgZ(11,"p",5),t._uU(12),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.hij("",n.name,": "),t.xp6(2),t.Gre("toggle-diamond ",n.toggle,""),t.xp6(1),t.Q6J("ngIf",n.toggle),t.xp6(2),t.Oqu(n.trueToggle),t.xp6(2),t.Gre("toggle-diamond ",!n.toggle,""),t.xp6(1),t.Q6J("ngIf",!n.toggle),t.xp6(2),t.Oqu(n.falseToggle))},directives:[c.O5],styles:[".toggle-header[_ngcontent-%COMP%]{display:inline-block;margin:0 20px 10px 10px}.toggle-text[_ngcontent-%COMP%]{display:inline-block;margin:0 20px 0 0;padding-top:10px}.toggle-text.last[_ngcontent-%COMP%]{margin-right:10px}.setting-container[_ngcontent-%COMP%]{background:#00000040;margin:10px;width:-moz-fit-content;width:fit-content}.toggle-diamond[_ngcontent-%COMP%]{width:15px;height:15px;transform:rotate(45deg) translateY(2px);display:inline-block;margin-right:5px;background-color:#212c4a;cursor:pointer}.toggle-diamond.false[_ngcontent-%COMP%]{border:1px solid white}.toggle-diamond.true[_ngcontent-%COMP%]{border:1.5px solid white;filter:drop-shadow(0px 0px 10px #0061ff)}.toggle-diamond[_ngcontent-%COMP%]   .L[_ngcontent-%COMP%]{position:absolute;margin:0;transform:translate(1px,-3.2px);font-weight:900;font-size:8px;color:#212c4a}.toggle-diamond[_ngcontent-%COMP%]   .trueBox[_ngcontent-%COMP%]{width:9px;height:9px;position:absolute;background:white;transform:translate(1.5px,1.5px) scaleX(-1);text-shadow:0 0 5px #0081ff}.toggle-container[_ngcontent-%COMP%]{display:inline-block;cursor:pointer}"]}),i})();const L=["autoResize"];let Q=(()=>{class i{constructor(e,n,o,s,a){this.prompt=e,this.storage=n,this.modalController=o,this.azurapi=s,this.shipCategoryData=a,this.isIconUI=!0}ngOnInit(){return(0,h.mG)(this,void 0,void 0,function*(){const e=yield this.storage.get("icon-ui");null!=e&&(this.isIconUI=e),this.azurapi.retreiveStatus=""})}ngAfterViewInit(){this.modalIndex=this.prompt.init(this.autoResize.nativeElement.getBoundingClientRect().height,!0)}switchUI(e){return(0,h.mG)(this,void 0,void 0,function*(){this.storage.set("icon-ui",e),this.isIconUI=e})}retreiveLostShips(){this.azurapi.init(!0)}exit(){this.modalController.dismiss()}resetCategories(){this.prompt.openConfirmation(this.modalIndex,"RESET CATEGORIES","All categories, including custom, will be deleted. Levels and settings preferences will be intact. Proceed?").then(e=>{e&&(this.modalController.dismiss(),this.shipCategoryData.sortedCategoryNames=[],this.shipCategoryData.allShips=[],this.shipCategoryData.promptPreset())})}resetSite(){this.prompt.openConfirmation(this.modalIndex,"RESET SITE","All categories, ship levels, and settings preferences will be deleted. Proceed?").then(e=>{e&&(this.modalController.dismiss(),this.shipCategoryData.sortedCategoryNames=[],this.shipCategoryData.allShips=[],this.storage.remove("categories"),this.azurapi.init())})}ngOnDestroy(){this.prompt.exit()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(v.l),t.Y36(y.K),t.Y36(l.IN),t.Y36(F.$),t.Y36(m.V))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-settings"]],viewQuery:function(e,n){if(1&e&&t.Gf(L,5),2&e){let o;t.iGM(o=t.CRH())&&(n.autoResize=o.first)}},decls:29,vars:2,consts:[[1,"prompt-heading","exit",3,"click"],["src","assets/exit.png",1,"prompt-heading","exit-img"],[1,"prompt-heading","background"],[1,"prompt-heading","text"],[1,"prompt-heading","stripes"],[1,"prompt-info-background"],["autoResize",""],["name","UI Mode","trueToggle","Icon","falseToggle","Sheet","storageName","icon-ui",3,"defaultState"],["name","Helper Buttons","trueToggle","On","falseToggle","Off","storageName","help-buttons",3,"defaultState"],[2,"display","flex"],[1,"prompt-button-container","no-top"],[1,"prompt-button","blue",3,"click"],[1,"prompt-button-text"],[1,"prompt-button-edge"],[1,"prompt-buttons"],[1,"prompt-button-container"]],template:function(e,n){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"div",0),t.NdJ("click",function(){return n.exit()}),t._UZ(2,"img",1),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"p",3),t._uU(5,"SETTINGS"),t.qZA(),t._UZ(6,"div",4),t.qZA(),t.qZA(),t.TgZ(7,"div",5),t.TgZ(8,"div",null,6),t._UZ(10,"app-settings-toggle",7),t._UZ(11,"app-settings-toggle",8),t.TgZ(12,"div",9),t.TgZ(13,"div",10),t.TgZ(14,"div",11),t.NdJ("click",function(){return n.resetCategories()}),t.TgZ(15,"p",12),t._uU(16,"Reset Categories"),t.qZA(),t.qZA(),t._UZ(17,"div",13),t.qZA(),t.TgZ(18,"div",10),t.TgZ(19,"div",11),t.NdJ("click",function(){return n.resetSite()}),t.TgZ(20,"p",12),t._uU(21,"Reset Site"),t.qZA(),t.qZA(),t._UZ(22,"div",13),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"div",14),t.TgZ(24,"div",15),t.TgZ(25,"div",11),t.NdJ("click",function(){return n.exit()}),t.TgZ(26,"p",12),t._uU(27,"Close"),t.qZA(),t.qZA(),t._UZ(28,"div",13),t.qZA(),t.qZA()),2&e&&(t.xp6(10),t.Q6J("defaultState",!0),t.xp6(1),t.Q6J("defaultState",!0))},directives:[J],styles:[".toggle-header[_ngcontent-%COMP%]{display:inline-block;margin:0 20px 10px 10px}.toggle-text[_ngcontent-%COMP%]{display:inline-block;margin:0 20px 0 0;padding-top:10px}.toggle-text.last[_ngcontent-%COMP%]{margin-right:10px}.setting-container[_ngcontent-%COMP%]{background:#00000040;margin:10px;width:-moz-fit-content;width:fit-content}.toggle-diamond[_ngcontent-%COMP%]{width:15px;height:15px;transform:rotate(45deg) translateY(2px);display:inline-block;margin-right:5px;background-color:#212c4a;cursor:pointer}.toggle-diamond.false[_ngcontent-%COMP%]{border:1px solid white}.toggle-diamond.true[_ngcontent-%COMP%]{border:1.5px solid white;filter:drop-shadow(0px 0px 10px #0061ff)}.toggle-diamond[_ngcontent-%COMP%]   .L[_ngcontent-%COMP%]{position:absolute;margin:0;transform:translate(1px,-3.2px);font-weight:900;font-size:8px;color:#212c4a}.toggle-diamond[_ngcontent-%COMP%]   .trueBox[_ngcontent-%COMP%]{width:9px;height:9px;position:absolute;background:white;transform:translate(1.5px,1.5px) scaleX(-1);text-shadow:0 0 5px #0081ff}.toggle-container[_ngcontent-%COMP%]{display:inline-block;cursor:pointer}"]}),i})();var _=p(8193);function B(i,r){1&i&&t._UZ(0,"app-icon-ui",13)}function G(i,r){1&i&&t._UZ(0,"app-sheet-ui",13)}function z(i,r){if(1&i&&(t.TgZ(0,"div",11),t.YNc(1,B,1,0,"app-icon-ui",12),t.YNc(2,G,1,0,"app-sheet-ui",12),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isIconUI),t.xp6(1),t.Q6J("ngIf",!e.isIconUI)}}function X(i,r){1&i&&(t.TgZ(0,"div",14),t._uU(1," Loading... "),t.qZA())}let b=(()=>{class i{constructor(e,n,o,s,a){this.shipCategoryData=e,this.platform=n,this.modalController=o,this.storage=s,this.filter=a,this.isIconUI=!0,this.filterCss="unselected",this.sortCss="unselected",this.isHelpButtons=!0}ngAfterViewInit(){return(0,h.mG)(this,void 0,void 0,function*(){this.platformCSS=this.platform.is("mobileweb")?"mobile":"desktop",this.isIconUI=yield this.getToggleState(this.isIconUI,"icon-ui"),this.isHelpButtons=yield this.getToggleState(this.isHelpButtons,"help-buttons")})}openSettingsModal(){return(0,h.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:Q,animated:!1});e.present(),e.onDidDismiss().then(()=>(0,h.mG)(this,void 0,void 0,function*(){this.isHelpButtons=yield this.getToggleState(this.isHelpButtons,"help-buttons");const n=this.isIconUI;this.isIconUI=yield this.getToggleState(this.isIconUI,"icon-ui"),this.isIconUI!=n&&this.filter.filter()}))})}getToggleState(e,n){return(0,h.mG)(this,void 0,void 0,function*(){const o=yield this.storage.get(n);return null!=o&&(e=o),e})}toggleFilter(){"unselected"==this.filterCss?this.filterCss="selected":(this.filterCss="unselected",this.filter.isEverythingOn()||this.filter.toggleEverythingOn())}toggleSort(){this.sortCss="unselected"==this.sortCss?"selected":"unselected"}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.V),t.Y36(l.t4),t.Y36(l.IN),t.Y36(y.K),t.Y36(_.i))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-home"]],viewQuery:function(e,n){if(1&e&&t.Gf(l.W2,5),2&e){let o;t.iGM(o=t.CRH())&&(n.ionContent=o.first)}},decls:14,vars:9,consts:[[3,"fullscreen"],[1,"background"],[2,"display","flex"],[1,"header-container"],["src","assets/AL logo.webp",1,"header-img"],[1,"title","generic-text","no-glow"],[1,"settings-button",3,"click"],["src","assets/settings.png",1,"image"],[1,"generic-text","no-glow","text"],["class","categories",4,"ngIf"],["class","generic-text centered",4,"ngIf"],[1,"categories"],["style","position: relative",4,"ngIf"],[2,"position","relative"],[1,"generic-text","centered"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-content",0),t._UZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div"),t.TgZ(4,"div",3),t._UZ(5,"img",4),t.TgZ(6,"p",5),t._uU(7," Fleet Tech Tracker "),t.qZA(),t.TgZ(8,"div",6),t.NdJ("click",function(){return n.openSettingsModal()}),t._UZ(9,"img",7),t.TgZ(10,"p",8),t._uU(11,"Settings"),t.qZA(),t.qZA(),t.qZA(),t.YNc(12,z,3,2,"div",9),t.YNc(13,X,2,0,"div",10),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Gre("main-content ",n.platformCSS,""),t.Q6J("fullscreen",!0),t.xp6(3),t.Gre("side-bars ",n.platformCSS,""),t.xp6(9),t.Q6J("ngIf",0!=n.shipCategoryData.sortedCategoryNames.length),t.xp6(1),t.Q6J("ngIf",0==n.shipCategoryData.sortedCategoryNames.length))},styles:["#container[_ngcontent-%COMP%]{text-align:center;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.header-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.title[_ngcontent-%COMP%]{text-align:center;font-size:25px;width:100%;margin-bottom:10px;display:inline}.header-img[_ngcontent-%COMP%]{width:100px;transform:translateY(15px);display:inline}.generic-text[_ngcontent-%COMP%]{text-shadow:0px 0px 10px #0081ff;color:#ccebff;font-weight:bold;-webkit-user-select:none;user-select:none}.generic-text.options[_ngcontent-%COMP%]{text-align:center;margin:10px 20px;color:#fff;white-space:pre}.generic-text.options.selected[_ngcontent-%COMP%]{color:#fef1c3;text-shadow:0px 0px 10px #cd7252}.generic-text.drag-here[_ngcontent-%COMP%]{display:inline-block;padding-left:10px;margin:0}.generic-text.centered[_ngcontent-%COMP%]{text-align:center}.generic-text.no-glow[_ngcontent-%COMP%]{text-shadow:none}.side-bars[_ngcontent-%COMP%]{flex-direction:column;width:100%;min-width:0;position:relative}.side-bars.desktop[_ngcontent-%COMP%]{margin-left:200px;margin-right:200px}.side-bars.mobile[_ngcontent-%COMP%]{margin-left:0;margin-right:0}.options-button[_ngcontent-%COMP%]{margin:10px 10px 20px;height:40px;border-bottom:white;cursor:pointer;width:min-content;border-left:.1px solid #8A90A3;border-right:1px solid #8A90A3;border-top:1px solid #8A90A3;display:inline-block}.options-button.selected[_ngcontent-%COMP%]{background:linear-gradient(0deg,#FFF67B 4%,#AB8952 1%,#846C42 99%)}.options-button.unselected[_ngcontent-%COMP%]{background:linear-gradient(0deg,#D7F3F8 4%,#2d4370 1%,#375188 99%)}.options-button-square[_ngcontent-%COMP%]{width:2px;height:2px;background:white}.options-button-square.left[_ngcontent-%COMP%]{float:left;transform:translate(-1px,-1px)}.options-button-square.right[_ngcontent-%COMP%]{float:right;transform:translate(1px,-1px)}.settings-button[_ngcontent-%COMP%]{display:inline-block;position:absolute;margin-left:100px;margin-top:20px;cursor:pointer}.settings-button[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:30px}.settings-button[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin:0}.background[_ngcontent-%COMP%]{background:url(blueprint_bg.5c5f2ad60108b038.png);background-size:cover;width:100%;height:100vh;position:fixed;opacity:.5}.main-content[_ngcontent-%COMP%]{--ion-background-color: #002454}.main-content.mobile[_ngcontent-%COMP%]{text-align:center}",".filter-category[_ngcontent-%COMP%]{text-align:center;margin-right:3px;width:100px;height:50px}.filter-button[_ngcontent-%COMP%]{background:linear-gradient(180deg,#cbe4fc 0%,#cbe4fc 2%,#6b7994 4%,#394a64 100%);width:100px;height:50px;transform:translateY(-20px);cursor:pointer}.filter-button.unselected[_ngcontent-%COMP%]{background:linear-gradient(180deg,#526584 0%,#526584 0%,#526584 0%,#526584 3%,#425973 6%,#294150 100%);height:40px;transform:translateY(-10px)}.filter-name[_ngcontent-%COMP%]{text-shadow:0px 0px 10px #0081ff;padding-top:12px;-webkit-user-select:none;user-select:none}.filter-name.unselected[_ngcontent-%COMP%]{color:#bac2e3;text-shadow:0 0 2px #bac2e3}.filter-icon[_ngcontent-%COMP%]{float:left;width:50px;padding-top:8px;padding-left:10px;-webkit-user-select:none;user-select:none;filter:drop-shadow(0px 0px 10px #0061ff)}.filter-icon.unselected[_ngcontent-%COMP%]{filter:none}.filter-category-name[_ngcontent-%COMP%]{display:inline-block}.filter-category-container[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:inline-block;transform:translateY(15px)}"]}),i})();var I=p(8725);const W=[{path:"",component:b}];let V=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[I.Bz.forChild(W)],I.Bz]}),i})();var D=p(1619),U=p(3878);const j=["input"];let E=(()=>{class i{constructor(e,n){this.prompt=e,this.modalController=n}ngOnInit(){this.prompt.init(300),this.textLevel=this.level}ngAfterViewInit(){this.input.nativeElement.focus()}exit(){this.modalController.dismiss()}done(){this.modalController.dismiss(this.wasSlider?Math.min(this.level,125):Math.min(this.textLevel,125))}changeLastInput(e){this.wasSlider=e,e||(this.textLevel=this.input.nativeElement.value)}updateSlider(){this.level=this.textLevel}ngOnDestroy(){this.prompt.exit()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(v.l),t.Y36(l.IN))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-ship-level-editor"]],viewQuery:function(e,n){if(1&e&&t.Gf(j,5),2&e){let o;t.iGM(o=t.CRH())&&(n.input=o.first)}},inputs:{name:"name",level:"level"},decls:25,vars:4,consts:[[1,"prompt-heading","exit",3,"click"],["src","assets/exit.png",1,"prompt-heading","exit-img"],[1,"prompt-heading","background"],[1,"prompt-heading","text"],[1,"prompt-heading","stripes"],[1,"prompt-info-background"],[1,"prompt-text","centered"],["type","range","min","1","max","125",1,"slider",3,"ngModel","ngModelChange"],[3,"ngSubmit"],["name","this is for the form",1,"prompt-input","centered",3,"value","ngModel","blur","ngModelChange"],["input",""],[1,"prompt-buttons"],[1,"prompt-button-container"],[1,"prompt-button","red",3,"click"],[1,"prompt-button-text"],[1,"prompt-button-edge"],[1,"prompt-button","blue",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"div",0),t.NdJ("click",function(){return n.exit()}),t._UZ(2,"img",1),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"p",3),t._uU(5,"EDIT LEVEL"),t.qZA(),t._UZ(6,"div",4),t.qZA(),t.qZA(),t.TgZ(7,"div",5),t.TgZ(8,"p",6),t._uU(9),t.qZA(),t.TgZ(10,"input",7),t.NdJ("ngModelChange",function(s){return n.level=s})("ngModelChange",function(){return n.changeLastInput(!0)}),t.qZA(),t.TgZ(11,"form",8),t.NdJ("ngSubmit",function(){return n.done()}),t.TgZ(12,"input",9,10),t.NdJ("blur",function(){return n.updateSlider()})("ngModelChange",function(s){return n.textLevel=s})("ngModelChange",function(){return n.changeLastInput(!1)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",11),t.TgZ(15,"div",12),t.TgZ(16,"div",13),t.NdJ("click",function(){return n.exit()}),t.TgZ(17,"p",14),t._uU(18,"Cancel"),t.qZA(),t.qZA(),t._UZ(19,"div",15),t.qZA(),t.TgZ(20,"div",12),t.TgZ(21,"div",16),t.NdJ("click",function(){return n.done()}),t.TgZ(22,"p",14),t._uU(23,"Confirm"),t.qZA(),t.qZA(),t._UZ(24,"div",15),t.qZA(),t.qZA()),2&e&&(t.xp6(9),t.hij("Enter ",n.name,"'s level."),t.xp6(1),t.Q6J("ngModel",n.level),t.xp6(2),t.Q6J("value",n.level)("ngModel",n.textLevel))},directives:[f.eT,f.Fj,f.JJ,f.On,f._Y,f.JL,f.F],styles:["",".slider[_ngcontent-%COMP%]{-webkit-appearance:none;width:calc(100% - 20px);margin-left:10px;margin-right:10px;margin-bottom:10px;height:5px;cursor:pointer}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;width:20px;height:20px;background:white;transform:rotate(45deg);border:3px solid #6E7F9C;outline:1px solid white;cursor:pointer}"]}),i})();const $=["input"];function K(i,r){1&i&&(t.TgZ(0,"p",18),t._uU(1,"CREATE NEW CATEGORY"),t.qZA())}function tt(i,r){1&i&&(t.TgZ(0,"p",18),t._uU(1,"EDIT CATEGORY"),t.qZA())}function et(i,r){if(1&i&&t._UZ(0,"input",19,20),2&i){const e=t.oxw();t.Q6J("value",e.selectedCategory)}}function nt(i,r){if(1&i&&t._UZ(0,"input",21,20),2&i){const e=t.oxw();t.Q6J("value",e.selectedCategory)}}function it(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",22),t.TgZ(1,"div",13),t.NdJ("click",function(){return t.CHM(e),t.oxw().delete()}),t.TgZ(2,"p",14),t._uU(3,"Delete Category"),t.qZA(),t.qZA(),t._UZ(4,"div",15),t.qZA()}}function ot(i,r){1&i&&(t.TgZ(0,"p",14),t._uU(1,"Save"),t.qZA())}function rt(i,r){1&i&&(t.TgZ(0,"p",14),t._uU(1,"Create"),t.qZA())}let M=(()=>{class i{constructor(e,n,o,s){this.modalController=e,this.shipCategoryData=n,this.filter=o,this.prompt=s,this.modalIndex=0}ngAfterViewInit(){this.modalIndex=this.prompt.init(300)}exit(){this.modalController.dismiss("cancelled")}done(){null==this.selectedCategory?this.create():this.edit(),this.shipCategoryData.save()}delete(){return(0,h.mG)(this,void 0,void 0,function*(){this.prompt.openConfirmation(this.modalIndex,"DELETE CATEGORY","Are you sure you want to delete "+this.selectedCategory+"?").then(e=>{if(e){const n=this.shipCategoryData.categories[this.selectedCategory].sortId;this.shipCategoryData.newCategory("Binned Ships"),this.shipCategoryData.categories["Binned Ships"].ships=this.shipCategoryData.categories[this.selectedCategory].ships,this.shipCategoryData.decrementSortIds(n),delete this.shipCategoryData.categories[this.selectedCategory],this.shipCategoryData.selectedCategory=this.shipCategoryData.sortedCategoryNames[0],this.shipCategoryData.sort(),this.shipCategoryData.save(),this.modalController.dismiss()}})})}edit(){null==this.selectedCategory||this.input.value!=this.selectedCategory?!this.isNameAcceptable()||(this.shipCategoryData.categories[this.input.value]=this.shipCategoryData.categories[this.selectedCategory],this.shipCategoryData.categories[this.input.value].title=this.input.value,delete this.shipCategoryData.categories[this.selectedCategory],this.shipCategoryData.selectedCategory=this.input.value.toString(),this.shipCategoryData.sort(),this.filter.filter(),this.modalController.dismiss()):this.modalController.dismiss()}create(){this.isNameAcceptable()&&(this.shipCategoryData.newCategory(this.input.value.toString()),this.modalController.dismiss("created"))}isNameAcceptable(){switch(this.input.value){case"+":return this.setError("Trying to be clever, huh?"),!1;case"":case null:return this.setError("Enter a name!"),!1;case"Retrieved Ships":return this.setError("This name is reserved."),!1}let e=!0;return Object.keys(this.shipCategoryData.categories).forEach(n=>{n!=this.input.value||(e=!1)}),!!e||(this.setError("Another category already uses this name!"),!1)}open(e=null){return(0,h.mG)(this,void 0,void 0,function*(){(yield this.modalController.create({component:i,showBackdrop:!1,animated:!1,componentProps:{selectedCategory:e}})).present()})}ngOnDestroy(){this.prompt.exit()}setError(e){this.error=e,null!=this.selectedCategory&&this.prompt.changeHeight(350)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.IN),t.Y36(m.V),t.Y36(_.i),t.Y36(v.l))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-category-editor"]],viewQuery:function(e,n){if(1&e&&t.Gf($,5),2&e){let o;t.iGM(o=t.CRH())&&(n.input=o.first)}},inputs:{selectedCategory:"selectedCategory"},decls:25,vars:8,consts:[[1,"prompt-heading","exit",3,"click"],["src","assets/exit.png",1,"prompt-heading","exit-img"],[1,"prompt-heading","background"],["class","prompt-heading text",4,"ngIf"],[1,"prompt-heading","stripes"],[1,"prompt-info-background"],[3,"ngSubmit"],["placeholder","Enter name here...","class","prompt-input centered ",3,"value",4,"ngIf"],["placeholder","Enter name here...","class","vertically-aligned prompt-input centered ",3,"value",4,"ngIf"],[1,"prompt-nameError"],["class","prompt-button-container no-top",4,"ngIf"],[1,"prompt-buttons"],[1,"prompt-button-container"],[1,"prompt-button","red",3,"click"],[1,"prompt-button-text"],[1,"prompt-button-edge"],[1,"prompt-button","blue",3,"click"],["class","prompt-button-text",4,"ngIf"],[1,"prompt-heading","text"],["placeholder","Enter name here...",1,"prompt-input","centered",3,"value"],["input",""],["placeholder","Enter name here...",1,"vertically-aligned","prompt-input","centered",3,"value"],[1,"prompt-button-container","no-top"]],template:function(e,n){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"div",0),t.NdJ("click",function(){return n.exit()}),t._UZ(2,"img",1),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,K,2,0,"p",3),t.YNc(5,tt,2,0,"p",3),t._UZ(6,"div",4),t.qZA(),t.qZA(),t.TgZ(7,"div",5),t.TgZ(8,"form",6),t.NdJ("ngSubmit",function(){return n.done()}),t.YNc(9,et,2,1,"input",7),t.YNc(10,nt,2,1,"input",8),t.qZA(),t.TgZ(11,"p",9),t._uU(12),t.qZA(),t.YNc(13,it,5,0,"div",10),t.qZA(),t.TgZ(14,"div",11),t.TgZ(15,"div",12),t.TgZ(16,"div",13),t.NdJ("click",function(){return n.exit()}),t.TgZ(17,"p",14),t._uU(18,"Cancel"),t.qZA(),t.qZA(),t._UZ(19,"div",15),t.qZA(),t.TgZ(20,"div",12),t.TgZ(21,"div",16),t.NdJ("click",function(){return n.done()}),t.YNc(22,ot,2,0,"p",17),t.YNc(23,rt,2,0,"p",17),t.qZA(),t._UZ(24,"div",15),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Q6J("ngIf",null==n.selectedCategory),t.xp6(1),t.Q6J("ngIf",null!=n.selectedCategory),t.xp6(4),t.Q6J("ngIf",null!=n.selectedCategory),t.xp6(1),t.Q6J("ngIf",null==n.selectedCategory),t.xp6(2),t.Oqu(n.error),t.xp6(1),t.Q6J("ngIf",null!=n.selectedCategory),t.xp6(9),t.Q6J("ngIf",null!=n.selectedCategory),t.xp6(1),t.Q6J("ngIf",null==n.selectedCategory))},directives:[c.O5,f._Y,f.JL,f.F],styles:[".vertically-aligned[_ngcontent-%COMP%]{margin-top:40px}"]}),i})();const st=["categories"];function at(i,r){if(1&i&&(t.TgZ(0,"div",16),t.TgZ(1,"div",17),t._uU(2),t.qZA(),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",e," ")}}function lt(i,r){if(1&i&&(t.TgZ(0,"div",18),t.TgZ(1,"div",17),t._uU(2),t.qZA(),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",e," ")}}function ct(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",12,13),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).clickedCategory(s)}),t.YNc(2,at,3,1,"div",14),t.YNc(3,lt,3,1,"div",15),t.qZA()}if(2&i){const e=r.$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("ngIf",e==n.shipCategoryData.selectedCategory),t.xp6(1),t.Q6J("ngIf",e!=n.shipCategoryData.selectedCategory)}}function gt(i,r){if(1&i&&(t.TgZ(0,"div",10),t.YNc(1,ct,4,2,"div",11),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.shipCategoryData.sortedCategoryNames)}}function pt(i,r){1&i&&t._UZ(0,"app-sort-list",19)}function ht(i,r){1&i&&(t.TgZ(0,"div"),t._UZ(1,"app-filter-list"),t.qZA())}function dt(i,r){if(1&i&&t._UZ(0,"app-ship-card-list",20),2&i){const e=t.oxw();t.Q6J("category",e.shipCategoryData.selectedCategory)}}let O=(()=>{class i{constructor(e,n,o,s){this.shipCategoryData=e,this.platform=n,this.home=o,this.categoryEditor=s,this.categoryFoldToggle={}}ngAfterViewInit(){return(0,h.mG)(this,void 0,void 0,function*(){if(this.isMobile=this.platform.platforms().includes("mobileweb"),0!=this.shipCategoryData.sortedCategoryNames.length)return;const e=setInterval(()=>{0!=this.shipCategoryData.sortedCategoryNames.length&&(this.shipCategoryData.selectedCategory=this.shipCategoryData.sortedCategoryNames[0],clearInterval(e))},500)})}clickedCategory(e){this.shipCategoryData.selectedCategory=e}openCategoryEditor(e=null){return(0,h.mG)(this,void 0,void 0,function*(){this.categoryEditor.open(e)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.V),t.Y36(l.t4),t.Y36(b),t.Y36(M))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-icon-ui"]],viewQuery:function(e,n){if(1&e&&t.Gf(st,5),2&e){let o;t.iGM(o=t.CRH())&&(n.categoryElements=o)}},decls:15,vars:10,consts:[["class","categories",4,"ngIf"],[1,"options-button","unselected",3,"click"],[1,"options-button-square","left"],[1,"options-button-square","right"],[1,"generic-text","options"],[3,"click"],["style","display: inline-block",4,"ngIf"],["helpType","icon-ui"],[4,"ngIf"],["id","ship-card-list",3,"category",4,"ngIf"],[1,"categories"],["class","category-container",3,"click",4,"ngFor","ngForOf"],[1,"category-container",3,"click"],["categories",""],["class","category selected",4,"ngIf"],["class","category unselected",4,"ngIf"],[1,"category","selected"],[1,"category-text"],[1,"category","unselected"],[2,"display","inline-block"],["id","ship-card-list",3,"category"]],template:function(e,n){1&e&&(t.YNc(0,gt,2,1,"div",0),t.TgZ(1,"div",1),t.NdJ("click",function(){return n.openCategoryEditor(n.shipCategoryData.selectedCategory)}),t._UZ(2,"div",2),t._UZ(3,"div",3),t.TgZ(4,"div",4),t._uU(5," Options "),t.qZA(),t.qZA(),t.TgZ(6,"div",5),t.NdJ("click",function(){return n.home.toggleSort()}),t._UZ(7,"div",2),t._UZ(8,"div",3),t.TgZ(9,"div"),t._uU(10," Sort "),t.qZA(),t.qZA(),t.YNc(11,pt,1,0,"app-sort-list",6),t._UZ(12,"app-help-button",7),t.YNc(13,ht,2,0,"div",8),t.YNc(14,dt,1,1,"app-ship-card-list",9)),2&e&&(t.Q6J("ngIf",n.shipCategoryData.sortedCategoryNames),t.xp6(6),t.Gre("options-button ",n.home.sortCss,""),t.xp6(3),t.Gre("generic-text options ",n.home.sortCss,""),t.xp6(2),t.Q6J("ngIf","selected"==n.home.sortCss),t.xp6(2),t.Q6J("ngIf","selected"==n.home.filterCss),t.xp6(1),t.Q6J("ngIf",null!=n.shipCategoryData.selectedCategory))},styles:[".category[_ngcontent-%COMP%]{display:inline-block;margin:10px}.category.selected[_ngcontent-%COMP%]{background:linear-gradient(180deg,#4a6994 0%,#4a82ce 98%,#f9fcff 99%);border-left:1px solid #4a6994;border-right:1px solid #4a6994}.category.unselected[_ngcontent-%COMP%]{background:linear-gradient(180deg,#6b7584 0%,#7b8ea5 95%,#bbc9d4 96%);border-left:1px solid #bbc9d4;border-right:1px solid #bbc9d4;cursor:pointer}.category-text[_ngcontent-%COMP%]{text-align:center;margin:5px 10px;-webkit-user-select:none;user-select:none;display:inline-block;color:#fff}.category-container[_ngcontent-%COMP%]{display:inline-block}.categories[_ngcontent-%COMP%]{margin-bottom:20px}.sort-options-arrow[_ngcontent-%COMP%]{transform:translate(-10px,10px);float:right}","#container[_ngcontent-%COMP%]{text-align:center;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.header-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.title[_ngcontent-%COMP%]{text-align:center;font-size:25px;width:100%;margin-bottom:10px;display:inline}.header-img[_ngcontent-%COMP%]{width:100px;transform:translateY(15px);display:inline}.generic-text[_ngcontent-%COMP%]{text-shadow:0px 0px 10px #0081ff;color:#ccebff;font-weight:bold;-webkit-user-select:none;user-select:none}.generic-text.options[_ngcontent-%COMP%]{text-align:center;margin:10px 20px;color:#fff;white-space:pre}.generic-text.options.selected[_ngcontent-%COMP%]{color:#fef1c3;text-shadow:0px 0px 10px #cd7252}.generic-text.drag-here[_ngcontent-%COMP%]{display:inline-block;padding-left:10px;margin:0}.generic-text.centered[_ngcontent-%COMP%]{text-align:center}.generic-text.no-glow[_ngcontent-%COMP%]{text-shadow:none}.side-bars[_ngcontent-%COMP%]{flex-direction:column;width:100%;min-width:0;position:relative}.side-bars.desktop[_ngcontent-%COMP%]{margin-left:200px;margin-right:200px}.side-bars.mobile[_ngcontent-%COMP%]{margin-left:0;margin-right:0}.options-button[_ngcontent-%COMP%]{margin:10px 10px 20px;height:40px;border-bottom:white;cursor:pointer;width:min-content;border-left:.1px solid #8A90A3;border-right:1px solid #8A90A3;border-top:1px solid #8A90A3;display:inline-block}.options-button.selected[_ngcontent-%COMP%]{background:linear-gradient(0deg,#FFF67B 4%,#AB8952 1%,#846C42 99%)}.options-button.unselected[_ngcontent-%COMP%]{background:linear-gradient(0deg,#D7F3F8 4%,#2d4370 1%,#375188 99%)}.options-button-square[_ngcontent-%COMP%]{width:2px;height:2px;background:white}.options-button-square.left[_ngcontent-%COMP%]{float:left;transform:translate(-1px,-1px)}.options-button-square.right[_ngcontent-%COMP%]{float:right;transform:translate(1px,-1px)}.settings-button[_ngcontent-%COMP%]{display:inline-block;position:absolute;margin-left:100px;margin-top:20px;cursor:pointer}.settings-button[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:30px}.settings-button[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin:0}.background[_ngcontent-%COMP%]{background:url(blueprint_bg.5c5f2ad60108b038.png);background-size:cover;width:100%;height:100vh;position:fixed;opacity:.5}.main-content[_ngcontent-%COMP%]{--ion-background-color: #002454}.main-content.mobile[_ngcontent-%COMP%]{text-align:center}"]}),i})(),T=(()=>{class i{constructor(){}moveElement(e,n,o,s,a,g){(null==n||null==o)&&(n=0,o=0);const u=[],C=e.nativeElement.getBoundingClientRect().x-n,d=e.nativeElement.getBoundingClientRect().y-o;return u[0]=C-2*C+g.currentX-s,u[1]=d-2*d+g.currentY-a,u}getHalfSizes(e){const n=[];return n[0]=e.nativeElement.getBoundingClientRect().width/2,n[1]=e.nativeElement.getBoundingClientRect().height/2,n}isColliding(e,n){return n.currentX>e.left&&n.currentX<e.left+e.width&&n.currentY>e.top&&n.currentY<e.top+e.height}getInitialX(e,n){const o=e.nativeElement.getBoundingClientRect().x-n;return o-2*o}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),q=(()=>{class i{constructor(){this.stats={FP:"Firepower",HP:"Health",RLD:"Reload",ASW:"Anti-Submarine Warfare",TRP:"Torpedo",AA:"Anti-Air",AVI:"Aviation",HIT:"Accuracy",EVA:"Evasion"},this.hulls={DD:"Destroyer",CV:"Aircraft Carrier",CVL:"Light Aircraft Carrier",CA:"Heavy Cruiser",CB:"Large Cruiser",CL:"Light Cruiser",BM:"Monitor",BB:"Battleship",BC:"Battlecruiser",AE:"Munition",AR:"Repair",BBV:"Aviation Battleship",SS:"Submarine",SSV:"Submarine Carrier"}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),P=(()=>{class i{constructor(e,n){this.shipCategoryData=e,this.filter=n,this.isAscending={Level:!1,Rarity:!1,Name:!1},this.rarityRanks={Normal:0,Rare:1,Elite:2,"Super-Rare":3,"Ultra-Rare":4,Decisive:4}}allSort(e,n=!1){Object.keys(this.shipCategoryData.categories).forEach(o=>{this.sort(e,o,n)})}sort(e,n,o=!1){switch(this.lastType=e,o&&(this.isAscending[e]=!this.isAscending[e]),e){case"Level":this.shipCategoryData.categories[n].ships.sort((s,a)=>!this.isAscending[e]&&s.level>a.level||this.isAscending[e]&&s.level<a.level?1:-1);break;case"Rarity":this.shipCategoryData.categories[n].ships.sort((s,a)=>!this.isAscending[e]&&this.rarityRanks[s.rarity]>this.rarityRanks[a.rarity]||this.isAscending[e]&&this.rarityRanks[s.rarity]<this.rarityRanks[a.rarity]?1:-1);break;case"Name":this.shipCategoryData.categories[n].ships.sort((s,a)=>!this.isAscending[e]&&s.name>a.name||this.isAscending[e]&&s.name<a.name?1:-1)}this.isAscending[e]=!this.isAscending[e],this.shipCategoryData.save(),this.filter.filter()}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(m.V),t.LFG(_.i))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const ut=["card"],ft=["levelInput"];function mt(i,r){1&i&&t._UZ(0,"div",14)}function _t(i,r){1&i&&(t.TgZ(0,"p",16),t._uU(1,"+2"),t.qZA())}function Ct(i,r){if(1&i&&(t.TgZ(0,"div"),t._UZ(1,"img",3),t.YNc(2,_t,2,0,"p",15),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Akn("width: "+e.fleetTechStatIconWidths[e.ship.techStat]+"px"),t.Q6J("title",e.hoverTitles.stats[e.ship.techStat]+" ("+e.ship.techStat+") +"+e.ship.techBonus)("src","assets/icons/stat icons/"+e.ship.techStat+".png",t.LSH),t.xp6(1),t.Q6J("ngIf",2==e.ship.techBonus)}}function xt(i,r){1&i&&(t.TgZ(0,"p",16),t._uU(1,"+2"),t.qZA())}function bt(i,r){if(1&i&&(t.TgZ(0,"div"),t._UZ(1,"img",17),t.YNc(2,xt,2,0,"p",15),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Akn("width: "+e.fleetTechStatIconWidths[e.ship.techStat]+"px"),t.Q6J("title",e.hoverTitles.stats[e.ship.techStat]+" ("+e.ship.techStat+") +"+e.ship.techBonus)("src","assets/icons/stat icons/"+e.ship.techStat+".png",t.LSH),t.xp6(1),t.Q6J("ngIf",2==e.ship.techBonus)}}function yt(i,r){if(1&i&&t._UZ(0,"img",18),2&i){const e=t.oxw();t.Q6J("src","assets/icons/frame hull icons/"+e.ship.hull+".png",t.LSH)}}function vt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"img",19),t.NdJ("error",function(){return t.CHM(e),t.oxw().getFallbackThumbnail()}),t.qZA()}if(2&i){const e=t.oxw();t.Gre("ship-thumbnail ship-rarity-",e.ship.rarity,""),t.Q6J("src",e.imageSrc,t.LSH)}}function Mt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"img",20),t.NdJ("error",function(){return t.CHM(e),t.oxw().getFallbackThumbnail()}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("src",e.imageSrc,t.LSH)}}function Ot(i,r){1&i&&t._UZ(0,"div",21)}let Tt=(()=>{class i{constructor(e,n,o,s,a,g,u,C,d,x,S){this.gestureController=e,this.shipCategoryData=n,this.filter=o,this.modalController=s,this.iconUI=a,this.home=g,this.iconDrag=u,this.dragFuncs=C,this.iconLoader=d,this.hoverTitles=x,this.sort=S,this.transformX=0,this.transformY=0,this.dragStatus="start",this.imageSrc="",this.ship=null,this.fleetTechStatIconWidths={HP:16,AA:17,ASW:18,TRP:16,FP:20,EVA:15,HIT:16,AVI:17,RLD:15}}ngOnInit(){this.imageSrc="assets/ship thumbnails/"+this.ship.id+".webp"}getFallbackThumbnail(){this.imageSrc=this.ship.thumbnail}ngAfterViewInit(){null!=this.iconDrag.draggedShipComponent&&this.iconDrag.draggedShipComponent.updateDraggedShipPos(),this.iconDrag.shipCardRefs.push(this.shipElement),this.iconDrag.shipCards.push(this),setTimeout(()=>{this.dragStatus="default"},50);let e=!1;this.gesture=this.gestureController.create({el:this.shipElement.nativeElement,threshold:0,gestureName:"my-gesture",onMove:n=>{if(e)this.updateDraggedShipPos(),this.otherCategoryCheck(),this.shipCollisionCheck();else if(Math.abs(n.deltaX)>10||Math.abs(n.deltaY)>10){this.iconDrag.draggedShipComponent=this,this.mouse=n,e=!0,this.dragStatus="dragged";const o=this.dragFuncs.getHalfSizes(this.shipElement);this.halfWidth=o[0],this.halfHeight=o[1],this.removeFromPreviousCategory(),this.shipCategoryData.categories[this.currentCategory].ships.push(this.ship),this.iconLoader.refresh(),this.updateDraggedShipPos()}},onEnd:()=>{!e||(e=!1,this.iconDrag.draggedShipComponent=null,this.dropShip(),this.iconLoader.refresh(),this.mouse=null,this.dragStatus="default",this.transformX=0,this.transformY=0,this.iconDrag.shipCards.forEach(n=>{n.droppingDir=0}))}},!0)}otherCategoryCheck(){for(let e=0;e<this.iconUI.categoryElements.length;e++){const n=this.iconUI.categoryElements.get(e).nativeElement.getBoundingClientRect();if(this.dragFuncs.isColliding(n,this.mouse)&&this.shipCategoryData.categories[this.currentCategory].sortId!=e){this.shipCategoryData.switchPos(this.ship,this.currentCategory,this.shipCategoryData.sortedCategoryNames[e]),this.filter.filter(),this.shipCategoryData.selectedCategory=this.shipCategoryData.sortedCategoryNames[e],this.shipCategoryData.save();break}}}shipCollisionCheck(){for(let e=0;e<this.iconDrag.shipCardRefs.length;e++){const n=this.iconDrag.shipCardRefs[e],o=n.nativeElement.getBoundingClientRect();if(this.iconDrag.shipCardRefs[e]!=this.shipElement&&this.dragFuncs.isColliding(o,this.mouse)){const s=this.dragFuncs.getHalfSizes(n)[0]+o.x;null!=this.collidingShip&&(this.collidingShip.droppingDir=0),this.collidingShip=this.iconDrag.shipCards[e],this.shipCategoryData.indexOf(this.collidingShip.ship),this.collidingShip.droppingDir=this.mouse.currentX<s?-1:1;break}}}dropShip(){const e=this.shipCategoryData.indexOf(this.collidingShip.ship);this.shipCategoryData.switchPos(this.ship,this.currentCategory,this.currentCategory,-1==this.collidingShip.droppingDir?e:e+1)}checkDroppedInCategory(){for(let e=0;e<this.iconUI.categoryElements.length;e++){const n=this.iconUI.categoryElements.get(e).nativeElement.getBoundingClientRect();if(this.dragFuncs.isColliding(n,this.mouse)&&this.shipCategoryData.categories[this.currentCategory].sortId!=e){this.addToCategory(e),this.removeFromPreviousCategory(),this.filter.filter();break}}}addToCategory(e){Object.keys(this.shipCategoryData.categories).forEach(n=>{const o=this.shipCategoryData.categories[n];if(o.sortId==e)return o.ships.push(this.ship),void this.filter.filter()})}removeFromPreviousCategory(){let e=this.shipCategoryData.categories[this.currentCategory].ships;e.splice(e.indexOf(this.ship),1)}updateDraggedShipPos(){null!=this.mouse&&this.home.ionContent.getScrollElement().then(()=>{const e=this.dragFuncs.moveElement(this.shipElement,this.transformX,this.transformY,this.halfWidth,this.halfHeight,this.mouse);this.transformX=e[0],this.transformY=e[1]})}enterLevel(){return(0,h.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:E,animated:!1,componentProps:{name:this.ship.name,level:this.ship.level}});e.present(),e.onDidDismiss().then(n=>{null!=n.data&&(this.ship.level=n.data,this.shipCategoryData.save(),"Level"==this.sort.lastType&&this.sort.sort("Level",this.currentCategory,!0))})})}ngOnDestroy(){this.gesture.destroy()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.TH),t.Y36(m.V),t.Y36(_.i),t.Y36(l.IN),t.Y36(O),t.Y36(b),t.Y36(U.Z),t.Y36(T),t.Y36(D.t),t.Y36(q),t.Y36(P))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-ship-card"]],viewQuery:function(e,n){if(1&e&&(t.Gf(ut,5,t.SBq),t.Gf(ft,5)),2&e){let o;t.iGM(o=t.CRH())&&(n.shipElement=o.first),t.iGM(o=t.CRH())&&(n.levelInput=o.first)}},inputs:{ship:"ship",currentCategory:"currentCategory"},decls:19,vars:16,consts:[["card",""],["class","dropping left",4,"ngIf"],[1,"ship-hull-and-level-background"],[1,"ship-hull-icon",3,"title","src"],[4,"ngIf"],["title","Click to edit level",3,"click"],[1,"ship-level","Lv-text"],["class","ship-hull-icon",3,"src",4,"ngIf"],[2,"display","inline-block"],[3,"src","class","error",4,"ngIf"],["class","ship-thumbnail UR-or-decisive",3,"src","error",4,"ngIf"],[1,"ship-name"],[1,"ship-name-text"],["class","dropping right",4,"ngIf"],[1,"dropping","left"],["class","double-stats-text",4,"ngIf"],[1,"double-stats-text"],[1,"ship-hull-icon","FP",3,"title","src"],[1,"ship-hull-icon",3,"src"],[3,"src","error"],[1,"ship-thumbnail","UR-or-decisive",3,"src","error"],[1,"dropping","right"]],template:function(e,n){1&e&&(t.TgZ(0,"div",null,0),t.YNc(2,mt,1,0,"div",1),t.TgZ(3,"div",2),t._UZ(4,"img",3),t.YNc(5,Ct,3,5,"div",4),t.YNc(6,bt,3,5,"div",4),t.TgZ(7,"div",5),t.NdJ("click",function(){return n.enterLevel()}),t.TgZ(8,"p",6),t._uU(9),t.qZA(),t.qZA(),t._UZ(10,"br"),t.YNc(11,yt,1,1,"img",7),t.qZA(),t.TgZ(12,"div",8),t.YNc(13,vt,1,4,"img",9),t.YNc(14,Mt,1,1,"img",10),t.TgZ(15,"div",11),t.TgZ(16,"p",12),t._uU(17),t.qZA(),t.qZA(),t.qZA(),t.YNc(18,Ot,1,0,"div",13),t.qZA()),2&e&&(t.Akn("transform: translate( "+n.transformX+"px, "+n.transformY+"px )"),t.Gre("ship-card-container ",n.dragStatus,""),t.xp6(2),t.Q6J("ngIf",-1==n.droppingDir),t.xp6(2),t.Q6J("title",n.hoverTitles.hulls[n.ship.hull]+" ("+n.ship.hull+")")("src","assets/icons/frame hull icons/"+n.ship.hull+".png",t.LSH),t.xp6(1),t.Q6J("ngIf","FP"!=n.ship.techStat),t.xp6(1),t.Q6J("ngIf","FP"==n.ship.techStat),t.xp6(3),t.hij("Lv. ",n.ship.level," "),t.xp6(2),t.Q6J("ngIf",0!=n.ship.onlyApplicableHulls.length),t.xp6(2),t.Q6J("ngIf","Ultra-Rare"!=n.ship.rarity&&"Decisive"!=n.ship.rarity),t.xp6(1),t.Q6J("ngIf","Ultra-Rare"==n.ship.rarity||"Decisive"==n.ship.rarity),t.xp6(3),t.Oqu(n.ship.name),t.xp6(1),t.Q6J("ngIf",1==n.droppingDir))},directives:[c.O5],styles:[".ship-thumbnail[_ngcontent-%COMP%]{width:100px;border-right:0;border-left:0;border-radius:5px;height:144px;pointer-events:none;-o-user-select:none;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.ship-thumbnail.ship-rarity-Normal[_ngcontent-%COMP%]{border:5px solid #A5AAB5;border-right:0;border-left:0;background:linear-gradient(0deg,#BDC7CE 44%,#6B697B 99%)}.ship-thumbnail.ship-rarity-Rare[_ngcontent-%COMP%]{border:5px solid #6abff7;border-right:0;border-left:0;background:linear-gradient(0deg,#89C3F9 44%,#42617C 99%)}.ship-thumbnail.ship-rarity-Elite[_ngcontent-%COMP%]{border:5px solid #9b8eff;border-right:0;border-left:0;background:linear-gradient(0deg,#AD96FF 44%,#53497B 99%)}.ship-thumbnail.ship-rarity-Super-Rare[_ngcontent-%COMP%]{border:5px solid #f7d84b;border-right:0;border-left:0;background:linear-gradient(0deg,#f7cf52 44%,#807539 99%)}.ship-thumbnail.UR-or-decisive[_ngcontent-%COMP%]{background-image:url(UR\\ border.4979bb4c21e8a80a.png);border:5px solid transparent;border-right:0;border-left:0}.ship-hull-and-level-background[_ngcontent-%COMP%]{background:#0000006e;height:15px;width:100px;position:absolute;margin-top:5px;display:inline-block}.ship-hull-icon[_ngcontent-%COMP%]{width:24.5px;z-index:1;float:left;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.ship-hull-icon.FP[_ngcontent-%COMP%]{transform:translateY(2px)}.ship-hull-icon.applicable[_ngcontent-%COMP%]{position:relative;transform:translateY(2px)}.applicable-ship-hull-icon-container[_ngcontent-%COMP%]{transform:translateY(-28px);position:absolute;margin:5px auto auto;background:#00000099;height:19px;width:100px;border-radius:0 0 5px 5px}.ship-level[_ngcontent-%COMP%]{font-family:AgencyGothic;text-align:right;float:right;font-size:17px;margin:0;-webkit-user-select:none;user-select:none;transform:translate(-6px,-1.5px);color:#fff;cursor:pointer}.ship-level.input[_ngcontent-%COMP%]{height:20px;width:25px;margin-right:5px}.ship-name[_ngcontent-%COMP%]{transform:translateY(-45px);background:#00000099;height:17px;width:100px;margin-top:5px;position:absolute}.ship-name-text[_ngcontent-%COMP%]{transform:translateY(-13px);font-family:ship-name;text-align:center;font-size:13px;font-weight:bold;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-left:5px;padding-right:5px;-webkit-user-select:none;user-select:none;color:#fff}.double-stats-text[_ngcontent-%COMP%]{transform:translateY(1.5px);font-family:ship-name;font-weight:bold;font-size:10px;margin:0;float:left;-webkit-user-select:none;user-select:none;color:#fff}.ship-card-container[_ngcontent-%COMP%]{will-change:transform;margin:8px 8px 4px;display:inline-block;position:relative}.ship-card-container.default[_ngcontent-%COMP%]{z-index:0;filter:none;transform:none;transition:opacity .5s;opacity:1}.ship-card-container.dragged[_ngcontent-%COMP%]{position:relative;z-index:99;filter:drop-shadow(0px 0px 20px black)}.ship-card-container.start[_ngcontent-%COMP%]{transition:opacity 0s;opacity:0}.dropping[_ngcontent-%COMP%]{position:absolute;height:144px;width:20px;display:inline-block;background:lime;border-radius:5px;z-index:99}.dropping.right[_ngcontent-%COMP%]{margin-left:5px;transform:translate(-20px)}.dropping.left[_ngcontent-%COMP%]{margin-right:5px}.invisible-ship-card[_ngcontent-%COMP%]{width:116px;height:144px;display:inline-block;margin-bottom:8px}"]}),i})();const wt=["ships"];function Zt(i,r){if(1&i&&t._UZ(0,"app-ship-card",5,6),2&i){const e=t.oxw().$implicit,n=t.oxw();t.Q6J("ship",e)("currentCategory",n.category)}}function Pt(i,r){if(1&i&&(t.TgZ(0,"div",3),t.YNc(1,Zt,2,2,"app-ship-card",4),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.Q6J("ngIf",null!=e)}}function kt(i,r){1&i&&t._UZ(0,"div",7)}const St=function(){return[]};let At=(()=>{class i{constructor(e,n,o,s){this.shipCategoryData=e,this.filter=n,this.iconLoader=o,this.iconDrag=s,this.fleetTechStatIconWidths={HP:16,AA:17,ASW:18,TRP:16,FP:27,EVA:15,HIT:16,AVI:17,RLD:15},this.ships=[],this.delay=30}ngOnChanges(e){e.category.previousValue!=e.category.currentValue&&(this.filter.filter(),this.iconDrag.shipCards=[],this.iconDrag.shipCardRefs=[])}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.V),t.Y36(_.i),t.Y36(D.t),t.Y36(U.Z))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-ship-card-list"]],viewQuery:function(e,n){if(1&e&&t.Gf(wt,5),2&e){let o;t.iGM(o=t.CRH())&&(n.shipComponents=o)}},inputs:{category:"category"},features:[t.TTD],decls:3,vars:3,consts:[[1,"ship-grid"],["style","display: inline-block",4,"ngFor","ngForOf"],["class","invisible-ship-card",4,"ngFor","ngForOf"],[2,"display","inline-block"],[3,"ship","currentCategory",4,"ngIf"],[3,"ship","currentCategory"],["ships",""],[1,"invisible-ship-card"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Pt,2,1,"div",1),t.YNc(2,kt,1,0,"div",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",n.iconLoader.loadedShips),t.xp6(1),t.Q6J("ngForOf",t.DdM(2,St).constructor(n.filter.ships.length-n.iconLoader.loadedShips.length)))},directives:[c.sg,c.O5,Tt],styles:[".ship-grid[_ngcontent-%COMP%]{margin-bottom:100px}.invisible-ship-card[_ngcontent-%COMP%]{width:116px;height:144px;display:inline-block;margin-bottom:8px}"]}),i})();const It=["autoResize"];function Dt(i,r){1&i&&(t.TgZ(0,"div"),t.TgZ(1,"p",13),t._uU(2,"- Press any sort button to do so by its own category."),t.qZA(),t.TgZ(3,"p",13),t._uU(4,"- Pressing will also toggle whether the next press will be ascending or descending."),t.qZA(),t.TgZ(5,"p",13),t._uU(6,"- Ascending ("),t._UZ(7,"ion-icon",14),t._uU(8,") starts from lowest to highest value."),t.qZA(),t.TgZ(9,"p",13),t._uU(10,"- Descending ("),t._UZ(11,"ion-icon",15),t._uU(12,") starts from highest to lowest value."),t.qZA(),t.qZA())}function Ut(i,r){1&i&&(t.TgZ(0,"div"),t.TgZ(1,"p",13),t._uU(2,"- Press a filter button to toggle its state. Changes are applied immediately."),t.qZA(),t.TgZ(3,"p",13),t._uU(4,"- Double-click a filter to set others in the same category to the same state."),t.qZA(),t.TgZ(5,"p",13),t._uU(6,"- Double-clicking an "),t.TgZ(7,"u"),t._uU(8,"OFF"),t.qZA(),t._uU(9," filter will enable all, since its state after the first click was "),t.TgZ(10,"u"),t._uU(11,"ON"),t.qZA(),t._uU(12,", and vice versa."),t.qZA(),t.qZA())}function Et(i,r){1&i&&(t.TgZ(0,"div"),t.TgZ(1,"p",13),t._uU(2,"- Click on the + at the end of the category list to add a new one."),t.qZA(),t.TgZ(3,"p",13),t._uU(4,"- Click on a ship's level to change it."),t.qZA(),t.qZA())}function qt(i,r){1&i&&(t.TgZ(0,"div"),t.TgZ(1,"p",13),t._uU(2,"- Click on the + at the end of the list to add a new category."),t.qZA(),t.TgZ(3,"p",13),t._uU(4,"- Click on a category's name row to open the editor."),t.qZA(),t.TgZ(5,"p",13),t._uU(6,"- Click on a ship's level to change it."),t.qZA(),t.qZA())}let Yt=(()=>{class i{constructor(e,n){this.prompt=e,this.modalController=n}ngAfterViewInit(){this.prompt.init(this.autoResize.nativeElement.getBoundingClientRect().height,!0)}exit(){this.modalController.dismiss()}ngOnDestroy(){this.prompt.exit()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(v.l),t.Y36(l.IN))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-helper"]],viewQuery:function(e,n){if(1&e&&t.Gf(It,5),2&e){let o;t.iGM(o=t.CRH())&&(n.autoResize=o.first)}},inputs:{type:"type"},decls:20,vars:5,consts:[[1,"prompt-heading","exit",3,"click"],["src","assets/exit.png",1,"prompt-heading","exit-img"],[1,"prompt-heading","background"],[1,"prompt-heading","text"],[1,"prompt-heading","stripes"],[1,"prompt-info-background"],["autoResize",""],[4,"ngIf"],[1,"prompt-buttons"],[1,"prompt-button-container"],[1,"prompt-button","red",3,"click"],[1,"prompt-button-text"],[1,"prompt-button-edge"],[1,"prompt-text"],["name","caret-up-outline"],["name","caret-down-outline"]],template:function(e,n){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"div",0),t.NdJ("click",function(){return n.exit()}),t._UZ(2,"img",1),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"p",3),t._uU(5),t.qZA(),t._UZ(6,"div",4),t.qZA(),t.qZA(),t.TgZ(7,"div",5),t.TgZ(8,"div",null,6),t.YNc(10,Dt,13,0,"div",7),t.YNc(11,Ut,13,0,"div",7),t.YNc(12,Et,5,0,"div",7),t.YNc(13,qt,7,0,"div",7),t.qZA(),t.qZA(),t.TgZ(14,"div",8),t.TgZ(15,"div",9),t.TgZ(16,"div",10),t.NdJ("click",function(){return n.exit()}),t.TgZ(17,"p",11),t._uU(18,"Close"),t.qZA(),t.qZA(),t._UZ(19,"div",12),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.hij("",n.title," HELP"),t.xp6(5),t.Q6J("ngIf","sort"==n.type),t.xp6(1),t.Q6J("ngIf","filter"==n.type),t.xp6(1),t.Q6J("ngIf","icon-ui"==n.type),t.xp6(1),t.Q6J("ngIf","sheet-ui"==n.type))},directives:[c.O5,l.gu],styles:[""]}),i})();function Nt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",1),t.NdJ("click",function(){return t.CHM(e),t.oxw().openHelper()}),t.TgZ(1,"p",2),t._uU(2,"?"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.Gre("help-diamond ",e.helpType,"")}}let w=(()=>{class i{constructor(e,n,o){this.modalController=e,this.storage=n,this.home=o}ngOnInit(){}openHelper(){return(0,h.mG)(this,void 0,void 0,function*(){(yield this.modalController.create({component:Yt,animated:!1,componentProps:{type:this.helpType}})).present()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.IN),t.Y36(y.K),t.Y36(b))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-help-button"]],inputs:{helpType:"helpType"},decls:1,vars:1,consts:[[3,"class","click",4,"ngIf"],[3,"click"],[1,"question-mark"]],template:function(e,n){1&e&&t.YNc(0,Nt,3,3,"div",0),2&e&&t.Q6J("ngIf",n.home.isHelpButtons)},directives:[c.O5],styles:[".help-diamond[_ngcontent-%COMP%]{width:17px;height:17px;transform:rotate(45deg) translateY(2px);display:inline-block;margin:10px;background-color:#212c4a;border:1px solid white;cursor:pointer}.help-diamond[_ngcontent-%COMP%]   .question-mark[_ngcontent-%COMP%]{margin:0;transform:rotate(315deg) translate(4px)}.help-diamond.filter[_ngcontent-%COMP%]{transform:translateY(-50px) rotate(45deg) translateY(2px)}.help-diamond.icon-ui[_ngcontent-%COMP%], .help-diamond.sheet-ui[_ngcontent-%COMP%]{position:absolute;left:0;transform:translate(-40px,70px) rotate(45deg) translateY(2px)}"]}),i})();function Ft(i,r){if(1&i&&t._UZ(0,"img",6),2&i){const e=t.oxw(2);t.Akn("width: "+e.iconWidth+"px"),t.Q6J("src","assets/icons/unselected "+e.fileName+" icons/"+e.filterName+".png",t.LSH)}}function Rt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",3),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.clickedFilterButton(o.filterName,o.filterType)}),t.YNc(1,Ft,1,3,"img",4),t.TgZ(2,"p",5),t.TgZ(3,"b"),t._uU(4),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf","All"!=e.filterName&&"None"!=e.filterName),t.xp6(1),t.Akn("margin-right: "+e.textRightMargin+"px"),t.xp6(2),t.hij(" ",e.filterName," ")}}function Ht(i,r){if(1&i&&t._UZ(0,"img",11),2&i){const e=t.oxw(2);t.Akn("width: "+e.iconWidth+"px"),t.Q6J("src","assets/icons/"+e.fileName+" icons/"+e.filterName+".png",t.LSH)}}function Jt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",7),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.clickedFilterButton(o.filterName,o.filterType)}),t.TgZ(1,"div",8),t.YNc(2,Ht,1,3,"img",9),t.TgZ(3,"p",10),t.TgZ(4,"b"),t._uU(5),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngIf","All"!=e.filterName&&"None"!=e.filterName),t.xp6(1),t.Akn("margin-right: "+e.textRightMargin+"px"),t.xp6(2),t.hij(" ",e.filterName," ")}}let Lt=(()=>{class i{constructor(e){this.filter=e,this.clickCount=0}ngOnInit(){}clickedFilterButton(e,n){e!=this.previousPressedFilter&&(this.clickCount=0),this.previousPressedFilter=e,this.clickCount++,this.clickCount>=2?(this.filter.pressedFilter(e,n,!0),clearTimeout(this.doubleClickTimeout)):this.filter.pressedFilter(e,n,!1),this.doubleClickTimeout=setTimeout(()=>{this.clickCount=0},250)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(_.i))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-filter-button"]],inputs:{filterName:"filterName",filterType:"filterType",index:"index",iconWidth:"iconWidth",textRightMargin:"textRightMargin",fileName:"fileName"},decls:3,vars:2,consts:[[1,"filter-category"],["class","filter-button unselected",3,"click",4,"ngIf"],["class","filter-button",3,"click",4,"ngIf"],[1,"filter-button","unselected",3,"click"],["class","filter-icon unselected",3,"src","style",4,"ngIf"],[1,"filter-name","unselected"],[1,"filter-icon","unselected",3,"src"],[1,"filter-button",3,"click"],[2,"transform","translateY(5px)"],["class","filter-icon",3,"src","style",4,"ngIf"],[1,"filter-name"],[1,"filter-icon",3,"src"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-col",0),t.YNc(1,Rt,5,4,"div",1),t.YNc(2,Jt,6,4,"div",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",!n.filterType[n.filterName]),t.xp6(1),t.Q6J("ngIf",n.filterType[n.filterName]))},directives:[l.wI,c.O5],styles:["",".filter-category[_ngcontent-%COMP%]{text-align:center;margin-right:3px;width:100px;height:50px}.filter-button[_ngcontent-%COMP%]{background:linear-gradient(180deg,#cbe4fc 0%,#cbe4fc 2%,#6b7994 4%,#394a64 100%);width:100px;height:50px;transform:translateY(-20px);cursor:pointer}.filter-button.unselected[_ngcontent-%COMP%]{background:linear-gradient(180deg,#526584 0%,#526584 0%,#526584 0%,#526584 3%,#425973 6%,#294150 100%);height:40px;transform:translateY(-10px)}.filter-name[_ngcontent-%COMP%]{text-shadow:0px 0px 10px #0081ff;padding-top:12px;-webkit-user-select:none;user-select:none;float:right;margin:0}.filter-name.unselected[_ngcontent-%COMP%]{color:#bac2e3;text-shadow:0 0 2px #bac2e3}.filter-icon[_ngcontent-%COMP%]{float:left;width:50px;padding-top:8px;padding-left:10px;-webkit-user-select:none;user-select:none;filter:drop-shadow(0px 0px 10px #0061ff)}.filter-icon.unselected[_ngcontent-%COMP%]{filter:none}.filter-category-name[_ngcontent-%COMP%]{display:inline-block;transform:translateY(-19px)}.filter-category-container[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:inline-block;transform:translateY(15px)}"]}),i})();function Qt(i,r){if(1&i&&t._UZ(0,"app-filter-button",8),2&i){const e=r.$implicit,n=r.index,o=t.oxw();t.Q6J("filterName",e)("filterType",o.filter.hulls)("index",n)("iconWidth",o.hullIconWidths[n])("textRightMargin",o.hullTextRightMargins[n])}}function Bt(i,r){if(1&i&&t._UZ(0,"app-filter-button",9),2&i){const e=r.$implicit,n=r.index,o=t.oxw();t.Q6J("filterName",e)("filterType",o.filter.factions)("index",n)("iconWidth",o.factionIconWidths[n])("textRightMargin",o.factionTextRightMargins[n])}}function Gt(i,r){if(1&i&&t._UZ(0,"app-filter-button",10),2&i){const e=r.$implicit,n=r.index,o=t.oxw();t.Q6J("filterName",e)("filterType",o.filter.stats)("index",n)("iconWidth",o.statIconWidths[n])("textRightMargin",o.statTextRightMargins[n])}}let Y=(()=>{class i{constructor(e){this.filter=e,this.hullNames=["DD","CL","CA","CV","BB","SS","Others"],this.hullIconWidths=[40,40,40,40,50,40,35],this.hullTextRightMargins=[15,15,15,15,15,15,5],this.factionNames=["USS","HMS","IJN","KMS","ROC","SN","FFNF","MNF","RN"],this.factionIconWidths=[40,30,40,32,32,40,32,32,40],this.factionTextRightMargins=[10,15,15,15,2,17,15,15,17],this.statNames=["FP","TRP","AVI","AA","RLD","HIT","ASW","EVA","HP"],this.statIconWidths=[50,35,35,38,38,35,35,32,35],this.statTextRightMargins=[17,17,17,17,17,17,17,17,17]}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(_.i))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-filter-list"]],decls:19,vars:3,consts:[[1,"generic-text","filter-category-name"],[1,"filter-category-container"],["wrap-reverse",""],["fileName","hull",3,"filterName","filterType","index","iconWidth","textRightMargin",4,"ngFor","ngForOf"],["helpType","filter"],["fileName","faction",3,"filterName","filterType","index","iconWidth","textRightMargin",4,"ngFor","ngForOf"],[2,"margin-bottom","20px"],["fileName","stat",3,"filterName","filterType","index","iconWidth","textRightMargin",4,"ngFor","ngForOf"],["fileName","hull",3,"filterName","filterType","index","iconWidth","textRightMargin"],["fileName","faction",3,"filterName","filterType","index","iconWidth","textRightMargin"],["fileName","stat",3,"filterName","filterType","index","iconWidth","textRightMargin"]],template:function(e,n){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"p",0),t._uU(2,"Hulls: "),t.qZA(),t.TgZ(3,"ion-grid",1),t.TgZ(4,"ion-row",2),t.YNc(5,Qt,1,5,"app-filter-button",3),t.qZA(),t.qZA(),t._UZ(6,"app-help-button",4),t.qZA(),t.TgZ(7,"div"),t.TgZ(8,"p",0),t._uU(9,"Factions: "),t.qZA(),t.TgZ(10,"ion-grid",1),t.TgZ(11,"ion-row"),t.YNc(12,Bt,1,5,"app-filter-button",5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",6),t.TgZ(14,"p",0),t._uU(15,"Stats: "),t.qZA(),t.TgZ(16,"ion-grid",1),t.TgZ(17,"ion-row"),t.YNc(18,Gt,1,5,"app-filter-button",7),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.Q6J("ngForOf",n.hullNames),t.xp6(7),t.Q6J("ngForOf",n.factionNames),t.xp6(6),t.Q6J("ngForOf",n.statNames))},directives:[l.jY,l.Nd,c.sg,w,Lt],styles:[".filter-category[_ngcontent-%COMP%]{text-align:center;margin-right:3px;width:100px;height:50px}.filter-button[_ngcontent-%COMP%]{background:linear-gradient(180deg,#cbe4fc 0%,#cbe4fc 2%,#6b7994 4%,#394a64 100%);width:100px;height:50px;transform:translateY(-20px);cursor:pointer}.filter-button.unselected[_ngcontent-%COMP%]{background:linear-gradient(180deg,#526584 0%,#526584 0%,#526584 0%,#526584 3%,#425973 6%,#294150 100%);height:40px;transform:translateY(-10px)}.filter-name[_ngcontent-%COMP%]{text-shadow:0px 0px 10px #0081ff;padding-top:12px;-webkit-user-select:none;user-select:none;float:right;margin:0}.filter-name.unselected[_ngcontent-%COMP%]{color:#bac2e3;text-shadow:0 0 2px #bac2e3}.filter-icon[_ngcontent-%COMP%]{float:left;width:50px;padding-top:8px;padding-left:10px;-webkit-user-select:none;user-select:none;filter:drop-shadow(0px 0px 10px #0061ff)}.filter-icon.unselected[_ngcontent-%COMP%]{filter:none}.filter-category-name[_ngcontent-%COMP%]{display:inline-block;transform:translateY(-19px)}.filter-category-container[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;display:inline-block;transform:translateY(15px)}","#container[_ngcontent-%COMP%]{text-align:center;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.header-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.title[_ngcontent-%COMP%]{text-align:center;font-size:25px;width:100%;margin-bottom:10px;display:inline}.header-img[_ngcontent-%COMP%]{width:100px;transform:translateY(15px);display:inline}.generic-text[_ngcontent-%COMP%]{text-shadow:0px 0px 10px #0081ff;color:#ccebff;font-weight:bold;-webkit-user-select:none;user-select:none}.generic-text.options[_ngcontent-%COMP%]{text-align:center;margin:10px 20px;color:#fff;white-space:pre}.generic-text.options.selected[_ngcontent-%COMP%]{color:#fef1c3;text-shadow:0px 0px 10px #cd7252}.generic-text.drag-here[_ngcontent-%COMP%]{display:inline-block;padding-left:10px;margin:0}.generic-text.centered[_ngcontent-%COMP%]{text-align:center}.generic-text.no-glow[_ngcontent-%COMP%]{text-shadow:none}.side-bars[_ngcontent-%COMP%]{flex-direction:column;width:100%;min-width:0;position:relative}.side-bars.desktop[_ngcontent-%COMP%]{margin-left:200px;margin-right:200px}.side-bars.mobile[_ngcontent-%COMP%]{margin-left:0;margin-right:0}.options-button[_ngcontent-%COMP%]{margin:10px 10px 20px;height:40px;border-bottom:white;cursor:pointer;width:min-content;border-left:.1px solid #8A90A3;border-right:1px solid #8A90A3;border-top:1px solid #8A90A3;display:inline-block}.options-button.selected[_ngcontent-%COMP%]{background:linear-gradient(0deg,#FFF67B 4%,#AB8952 1%,#846C42 99%)}.options-button.unselected[_ngcontent-%COMP%]{background:linear-gradient(0deg,#D7F3F8 4%,#2d4370 1%,#375188 99%)}.options-button-square[_ngcontent-%COMP%]{width:2px;height:2px;background:white}.options-button-square.left[_ngcontent-%COMP%]{float:left;transform:translate(-1px,-1px)}.options-button-square.right[_ngcontent-%COMP%]{float:right;transform:translate(1px,-1px)}.settings-button[_ngcontent-%COMP%]{display:inline-block;position:absolute;margin-left:100px;margin-top:20px;cursor:pointer}.settings-button[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:30px}.settings-button[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin:0}.background[_ngcontent-%COMP%]{background:url(blueprint_bg.5c5f2ad60108b038.png);background-size:cover;width:100%;height:100vh;position:fixed;opacity:.5}.main-content[_ngcontent-%COMP%]{--ion-background-color: #002454}.main-content.mobile[_ngcontent-%COMP%]{text-align:center}"]}),i})();function zt(i,r){1&i&&t._UZ(0,"ion-icon",8)}function Xt(i,r){1&i&&t._UZ(0,"ion-icon",9)}function Wt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",2),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().sort(s)}),t._UZ(1,"div",3),t._UZ(2,"div",4),t.YNc(3,zt,1,0,"ion-icon",5),t.YNc(4,Xt,1,0,"ion-icon",6),t.TgZ(5,"div",7),t._uU(6),t.qZA(),t.qZA()}if(2&i){const e=r.$implicit,n=t.oxw();t.Q6J("title","Sort by "+e.toLowerCase()+(n.types[e]?" (descending)":" (ascending)")),t.xp6(3),t.Q6J("ngIf",!n.types[e]),t.xp6(1),t.Q6J("ngIf",n.types[e]),t.xp6(2),t.hij(" ",e," \xa0\xa0\xa0")}}let N=(()=>{class i{constructor(e,n,o,s){this.shipCategoryData=e,this.filter=n,this.storage=o,this.sortService=s,this.objectKeys=Object.keys,this.types={Rarity:!1,Level:!1,Name:!1},this.rarityRanks={Normal:0,Rare:1,Elite:2,"Super-Rare":3,"Ultra-Rare":4,Decisive:4}}ngOnInit(){}sort(e){return(0,h.mG)(this,void 0,void 0,function*(){this.types[e]=!this.types[e],(yield this.storage.get("icon-ui"))?this.sortService.sort(e,this.shipCategoryData.selectedCategory):this.sortService.allSort(e)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.V),t.Y36(_.i),t.Y36(y.K),t.Y36(P))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-sort-list"]],decls:3,vars:1,consts:[["class","options-button unselected",3,"title","click",4,"ngFor","ngForOf"],["helpType","sort"],[1,"options-button","unselected",3,"title","click"],[1,"options-button-square","left"],[1,"options-button-square","right"],["name","caret-up-outline","class","sort-options-arrow",4,"ngIf"],["name","caret-down-outline","class","sort-options-arrow",4,"ngIf"],[1,"generic-text","options","unselected"],["name","caret-up-outline",1,"sort-options-arrow"],["name","caret-down-outline",1,"sort-options-arrow"]],template:function(e,n){1&e&&(t.TgZ(0,"div"),t.YNc(1,Wt,7,4,"div",0),t._UZ(2,"app-help-button",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",n.objectKeys(n.types)))},directives:[c.sg,w,c.O5,l.gu],styles:["",".category[_ngcontent-%COMP%]{display:inline-block;margin:10px}.category.selected[_ngcontent-%COMP%]{background:linear-gradient(180deg,#4a6994 0%,#4a82ce 98%,#f9fcff 99%);border-left:1px solid #4a6994;border-right:1px solid #4a6994}.category.unselected[_ngcontent-%COMP%]{background:linear-gradient(180deg,#6b7584 0%,#7b8ea5 95%,#bbc9d4 96%);border-left:1px solid #bbc9d4;border-right:1px solid #bbc9d4;cursor:pointer}.category-text[_ngcontent-%COMP%]{text-align:center;margin:5px 10px;-webkit-user-select:none;user-select:none;display:inline-block;color:#fff}.category-container[_ngcontent-%COMP%]{display:inline-block}.categories[_ngcontent-%COMP%]{margin-bottom:20px}.sort-options-arrow[_ngcontent-%COMP%]{transform:translate(-10px,10px);float:right}","#container[_ngcontent-%COMP%]{text-align:center;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.header-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.title[_ngcontent-%COMP%]{text-align:center;font-size:25px;width:100%;margin-bottom:10px;display:inline}.header-img[_ngcontent-%COMP%]{width:100px;transform:translateY(15px);display:inline}.generic-text[_ngcontent-%COMP%]{text-shadow:0px 0px 10px #0081ff;color:#ccebff;font-weight:bold;-webkit-user-select:none;user-select:none}.generic-text.options[_ngcontent-%COMP%]{text-align:center;margin:10px 20px;color:#fff;white-space:pre}.generic-text.options.selected[_ngcontent-%COMP%]{color:#fef1c3;text-shadow:0px 0px 10px #cd7252}.generic-text.drag-here[_ngcontent-%COMP%]{display:inline-block;padding-left:10px;margin:0}.generic-text.centered[_ngcontent-%COMP%]{text-align:center}.generic-text.no-glow[_ngcontent-%COMP%]{text-shadow:none}.side-bars[_ngcontent-%COMP%]{flex-direction:column;width:100%;min-width:0;position:relative}.side-bars.desktop[_ngcontent-%COMP%]{margin-left:200px;margin-right:200px}.side-bars.mobile[_ngcontent-%COMP%]{margin-left:0;margin-right:0}.options-button[_ngcontent-%COMP%]{margin:10px 10px 20px;height:40px;border-bottom:white;cursor:pointer;width:min-content;border-left:.1px solid #8A90A3;border-right:1px solid #8A90A3;border-top:1px solid #8A90A3;display:inline-block}.options-button.selected[_ngcontent-%COMP%]{background:linear-gradient(0deg,#FFF67B 4%,#AB8952 1%,#846C42 99%)}.options-button.unselected[_ngcontent-%COMP%]{background:linear-gradient(0deg,#D7F3F8 4%,#2d4370 1%,#375188 99%)}.options-button-square[_ngcontent-%COMP%]{width:2px;height:2px;background:white}.options-button-square.left[_ngcontent-%COMP%]{float:left;transform:translate(-1px,-1px)}.options-button-square.right[_ngcontent-%COMP%]{float:right;transform:translate(1px,-1px)}.settings-button[_ngcontent-%COMP%]{display:inline-block;position:absolute;margin-left:100px;margin-top:20px;cursor:pointer}.settings-button[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:30px}.settings-button[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin:0}.background[_ngcontent-%COMP%]{background:url(blueprint_bg.5c5f2ad60108b038.png);background-size:cover;width:100%;height:100vh;position:fixed;opacity:.5}.main-content[_ngcontent-%COMP%]{--ion-background-color: #002454}.main-content.mobile[_ngcontent-%COMP%]{text-align:center}"]}),i})(),k=(()=>{class i{constructor(e){this.dragFuncs=e,this.rows={},this.rowRefs={},this.categories=[],this.categoryRefs=[],this.headerRefs=[]}startScrolling(e,n){null==this.scrollingInterval&&(this.scrollingInterval=setInterval(()=>{e.sheetUI.container.nativeElement.scrollLeft+=n,this.updateElementPos(e)}))}updateElementPos(e){const n=e.sheetUI.container.nativeElement.getBoundingClientRect(),o=e.gestureElement.nativeElement.getBoundingClientRect(),s=this.dragFuncs.moveElement(e.gestureElement,e.transformX,e.transformY,e.halfWidth,e.halfHeight,e.mouse),a=this.dragFuncs.getInitialX(e.gestureElement,e.transformX);e.transformY=s[1],e.mouse.currentX+e.halfWidth>n.x+n.width?(e.transformX=a+(n.x+n.width)-o.width,e.scrollingDir=1,this.startScrolling(e,-7)):e.mouse.currentX-e.halfWidth<n.x?(e.transformX=a+n.x,e.scrollingDir=-1,this.startScrolling(e,7)):(e.transformX=s[0],e.scrollingDir=0,clearInterval(this.scrollingInterval),this.scrollingInterval=null)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(T))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Vt=["container"],jt=["categoryContainers"];function $t(i,r){1&i&&t._UZ(0,"app-sort-list",7)}function Kt(i,r){1&i&&(t.TgZ(0,"div"),t._UZ(1,"app-filter-list"),t.qZA())}function te(i,r){if(1&i&&t._UZ(0,"app-sheet-category",11,12),2&i){const e=r.$implicit,n=r.index,o=t.oxw(2);t.Q6J("id",e)("category",e)("index",n)("isHeaderHighlighted",o.sheetDrag.highlightedHeader==n)("belowThisGrid",o.sheetDrag.belowGridIndex==n)}}function ee(i,r){if(1&i&&(t.TgZ(0,"div",8,9),t.YNc(2,te,2,5,"app-sheet-category",10),t.qZA()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.shipCategoryData.sortedCategoryNames)}}const ne=function(){return[]};let Z=(()=>{class i{constructor(e,n,o,s,a){this.shipCategoryData=e,this.home=n,this.filter=o,this.categoryEditor=s,this.sheetDrag=a,this.loadedSheets=0}ngOnInit(){this.sheetDrag.rows={},this.sheetDrag.rowRefs={}}openCategoryEditor(e){this.categoryEditor.open(e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.V),t.Y36(b),t.Y36(_.i),t.Y36(M),t.Y36(k))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-sheet-ui"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Vt,5),t.Gf(jt,5,t.SBq)),2&e){let o;t.iGM(o=t.CRH())&&(n.container=o.first),t.iGM(o=t.CRH())&&(n.categoryContainers=o)}},decls:14,vars:16,consts:[[3,"click"],[1,"options-button-square","left"],[1,"options-button-square","right"],["style","display: inline-block",4,"ngIf"],[4,"ngIf"],["helpType","sheet-ui"],["class","container",4,"ngIf"],[2,"display","inline-block"],[1,"container"],["container",""],["class","grid",3,"id","category","index","isHeaderHighlighted","belowThisGrid",4,"ngFor","ngForOf"],[1,"grid",3,"id","category","index","isHeaderHighlighted","belowThisGrid"],["categoryContainers",""]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.NdJ("click",function(){return n.home.toggleFilter()}),t._UZ(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"div"),t._uU(4," Filter "),t.qZA(),t.qZA(),t.TgZ(5,"div",0),t.NdJ("click",function(){return n.home.toggleSort()}),t._UZ(6,"div",1),t._UZ(7,"div",2),t.TgZ(8,"div"),t._uU(9," Sort "),t.qZA(),t.qZA(),t.YNc(10,$t,1,0,"app-sort-list",3),t.YNc(11,Kt,2,0,"div",4),t._UZ(12,"app-help-button",5),t.YNc(13,ee,3,1,"div",6)),2&e&&(t.Gre("options-button ",n.home.filterCss,""),t.xp6(3),t.Gre("generic-text options ",n.home.filterCss,""),t.xp6(2),t.Gre("options-button ",n.home.sortCss,""),t.xp6(3),t.Gre("generic-text options ",n.home.sortCss,""),t.xp6(2),t.Q6J("ngIf","selected"==n.home.sortCss),t.xp6(1),t.Q6J("ngIf","selected"==n.home.filterCss),t.xp6(2),t.Q6J("ngIf",n.filter.shipFilterPass!=t.DdM(15,ne)))},styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;overflow-x:auto;transform:rotate(180deg);color:#000;overflow-y:hidden;margin-bottom:200px}.grid[_ngcontent-%COMP%]{margin:20px 20px 20px 40px;transform:rotate(180deg) translate(-10px)}","#container[_ngcontent-%COMP%]{text-align:center;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.header-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.title[_ngcontent-%COMP%]{text-align:center;font-size:25px;width:100%;margin-bottom:10px;display:inline}.header-img[_ngcontent-%COMP%]{width:100px;transform:translateY(15px);display:inline}.generic-text[_ngcontent-%COMP%]{text-shadow:0px 0px 10px #0081ff;color:#ccebff;font-weight:bold;-webkit-user-select:none;user-select:none}.generic-text.options[_ngcontent-%COMP%]{text-align:center;margin:10px 20px;color:#fff;white-space:pre}.generic-text.options.selected[_ngcontent-%COMP%]{color:#fef1c3;text-shadow:0px 0px 10px #cd7252}.generic-text.drag-here[_ngcontent-%COMP%]{display:inline-block;padding-left:10px;margin:0}.generic-text.centered[_ngcontent-%COMP%]{text-align:center}.generic-text.no-glow[_ngcontent-%COMP%]{text-shadow:none}.side-bars[_ngcontent-%COMP%]{flex-direction:column;width:100%;min-width:0;position:relative}.side-bars.desktop[_ngcontent-%COMP%]{margin-left:200px;margin-right:200px}.side-bars.mobile[_ngcontent-%COMP%]{margin-left:0;margin-right:0}.options-button[_ngcontent-%COMP%]{margin:10px 10px 20px;height:40px;border-bottom:white;cursor:pointer;width:min-content;border-left:.1px solid #8A90A3;border-right:1px solid #8A90A3;border-top:1px solid #8A90A3;display:inline-block}.options-button.selected[_ngcontent-%COMP%]{background:linear-gradient(0deg,#FFF67B 4%,#AB8952 1%,#846C42 99%)}.options-button.unselected[_ngcontent-%COMP%]{background:linear-gradient(0deg,#D7F3F8 4%,#2d4370 1%,#375188 99%)}.options-button-square[_ngcontent-%COMP%]{width:2px;height:2px;background:white}.options-button-square.left[_ngcontent-%COMP%]{float:left;transform:translate(-1px,-1px)}.options-button-square.right[_ngcontent-%COMP%]{float:right;transform:translate(1px,-1px)}.settings-button[_ngcontent-%COMP%]{display:inline-block;position:absolute;margin-left:100px;margin-top:20px;cursor:pointer}.settings-button[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:30px}.settings-button[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin:0}.background[_ngcontent-%COMP%]{background:url(blueprint_bg.5c5f2ad60108b038.png);background-size:cover;width:100%;height:100vh;position:fixed;opacity:.5}.main-content[_ngcontent-%COMP%]{--ion-background-color: #002454}.main-content.mobile[_ngcontent-%COMP%]{text-align:center}"]}),i})();const ie=["row"],oe=["levelInput"];function re(i,r){if(1&i&&t._UZ(0,"img",2),2&i){const e=t.oxw(2);t.Akn("width: "+e.fleetTechStatIconWidths[e.ship.techStat]+"px"),t.Q6J("title",e.fleetTechHoverTitle)("src","assets/icons/stat icons/"+e.ship.techStat+".png",t.LSH)}}function se(i,r){if(1&i&&t._UZ(0,"img",7),2&i){const e=t.oxw(2);t.Akn("width: "+e.fleetTechStatIconWidths[e.ship.techStat]+"px"),t.Q6J("title",e.fleetTechHoverTitle)("src","assets/icons/stat icons/"+e.ship.techStat+".png",t.LSH)}}function ae(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",null,1),t.TgZ(2,"div"),t._UZ(3,"img",2),t._uU(4),t.qZA(),t.TgZ(5,"div"),t.YNc(6,re,1,4,"img",3),t.YNc(7,se,1,4,"img",4),t.TgZ(8,"div",5),t._uU(9),t.qZA(),t.qZA(),t.TgZ(10,"div",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().enterLevel()}),t._uU(11),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.Akn("z-index: "+e.zIndex+"; transform: translate( "+e.dragEl.transformX+"px, "+e.dragEl.transformY+"px )"),t.MT6("row ",e.draggedStatus," highlight-",e.greenBorder,""),t.xp6(2),t.Gre("ship-name ",e.ship.rarity," border"),t.xp6(1),t.Q6J("title",e.hoverTitles.hulls[e.ship.hull]+" ("+e.ship.hull+")")("src","assets/icons/frame hull icons/"+e.ship.hull+".png",t.LSH),t.xp6(1),t.hij(" ",e.ship.name," "),t.xp6(1),t.Gre("tech-stat border tech-stat ",e.ship.rarity,""),t.xp6(1),t.Q6J("ngIf","FP"!=e.ship.techStat),t.xp6(1),t.Q6J("ngIf","FP"==e.ship.techStat),t.xp6(1),t.Q6J("title",e.fleetTechHoverTitle),t.xp6(1),t.hij("+",e.ship.techBonus,""),t.xp6(1),t.Gre("level over119-",e.ship.level>119," border level"),t.xp6(1),t.Oqu(e.ship.level)}}let le=(()=>{class i{constructor(e,n,o,s,a,g,u,C,d,x){this.gestureController=e,this.shipCategoryData=n,this.sheetUI=o,this.filter=s,this.dragFuncs=a,this.sheetDrag=g,this.selfRef=u,this.modalController=C,this.hoverTitles=d,this.sort=x,this.draggedStatus="default",this.fleetTechStatIconWidths={HP:16,AA:17,ASW:17,TRP:16,FP:17,EVA:15,HIT:16,AVI:17,RLD:15}}ngOnInit(){this.inputShipLevel=this.ship.level.toString(),this.dragEl={sheetUI:this.sheetUI},this.fleetTechHoverTitle=this.hoverTitles.stats[this.ship.techStat]+" ("+this.ship.techStat+") +"+this.ship.techBonus}ngAfterViewInit(){this.dragEl.gestureElement=this.rowElement;let e=!1,n=0,o=null;const s=(a,g)=>{null==a[this.category]&&(a[this.category]={},a[this.category].ships=[]),a[this.category].ships.push(g)};s(this.sheetDrag.rows,this),s(this.sheetDrag.rowRefs,this.rowElement),this.dragEl.gesture=this.gestureController.create({el:this.rowElement.nativeElement,gestureName:"my-gesture",threshold:0,onMove:a=>{if(e){if(null!=this.dragEl.mouse){if(null==this.dragEl.halfWidth||null==this.dragEl.halfHeight){const g=this.dragFuncs.getHalfSizes(this.rowElement);this.dragEl.halfWidth=g[0],this.dragEl.halfHeight=g[1]}this.sheetDrag.updateElementPos(this.dragEl),n++,n>=3&&(n=0,this.checkCollidingShip(!1,this.dragEl.mouse),o=JSON.parse(JSON.stringify(this.dragEl.mouse)))}}else(Math.abs(a.deltaX)>10||Math.abs(a.deltaY)>10)&&(o=a,this.dragEl.mouse=a,e=!0,this.draggedStatus="dragged",console.log(document.getElementById(this.category)),document.getElementById(this.category).style.zIndex="99")},onEnd:()=>{!e||(document.getElementById(this.category).style.zIndex="0",e=!1,this.draggedStatus="default",this.dragEl.transformX=0,this.dragEl.transformY=0,this.checkCollidingShip(!0,o),this.dragEl.mouse=null,this.sheetDrag.highlightedHeader=null,this.shipCategoryData.save(),clearInterval(this.sheetDrag.scrollingInterval),this.sheetDrag.scrollingInterval=null,console.log(this.sheetDrag.rows))}},!0)}startScrolling(e){null==this.sheetDrag.scrollingInterval&&(this.sheetDrag.scrollingInterval=setInterval(()=>{this.sheetUI.container.nativeElement.scrollLeft+=e}))}checkCollidingShip(e,n){this.sheetDrag.highlightedHeader=null,this.sheetDrag.belowGridIndex=null,Object.keys(this.sheetDrag.rows).forEach(o=>{this.sheetDrag.rows[o].ships.forEach(s=>{s.greenBorder=""})});for(let o=0;o<this.sheetUI.categoryContainers.length;o++){const s=this.sheetUI.categoryContainers.get(o).nativeElement.getBoundingClientRect();if(this.dragFuncs.isColliding(s,n)){let a=!0;if(this.dragFuncs.isColliding(this.sheetDrag.headerRefs[o].nativeElement.getBoundingClientRect(),n)){a=!1,console.log("header"),e?(this.remove(),this.shipCategoryData.categories[this.shipCategoryData.sortedCategoryNames[o]].ships.unshift(this.ship)):this.sheetDrag.highlightedHeader=o;break}const g=this.shipCategoryData.sortedCategoryNames[o],u=this.sheetDrag.rows[g].ships,C=this.sheetDrag.rowRefs[g].ships;if(0!=this.shipCategoryData.categories[g].ships.length)for(let d=0;d<u.length;d++){const x=u[d],S=C[d].nativeElement.getBoundingClientRect();if(x!=this&&this.dragFuncs.isColliding(S,n)){a=!1,e?this.shipCategoryData.switchPos(this.ship,this.category,g,this.shipCategoryData.indexOf(x.ship)):x.displayGreenLine();break}}a&&(e?(this.shipCategoryData.switchPos(this.ship,this.category,g),this.shipCategoryData.save()):this.sheetDrag.belowGridIndex=o);break}}}displayGreenLine(){this.greenBorder="top"}addToCategory(e){let n=this.shipCategoryData.categories[this.category].ships;n.splice(n.indexOf(this.ship),0,e)}remove(){this.shipCategoryData.remove(this.ship,this.category)}enterLevel(){return(0,h.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:E,animated:!1,componentProps:{name:this.ship.name,level:this.ship.level}});e.present(),e.onDidDismiss().then(n=>{null!=n.data&&(this.ship.level=n.data,this.shipCategoryData.save(),"Level"==this.sort.lastType&&this.sort.sort("Level",this.category,!0))})})}ngOnDestroy(){this.dragEl.gesture.destroy()}levelInputFocus(){this.inputShipLevel="",this.zIndex=99,this.isSliderActive=!0}submitLevel(e){if(this.isSliderActive=!1,this.zIndex=0,""==this.inputShipLevel||null==this.inputShipLevel)this.inputShipLevel=this.ship.level.toString();else{"0"==this.inputShipLevel&&(this.inputShipLevel="1");const n=Math.min(parseInt(this.inputShipLevel),125);this.inputShipLevel=n.toString(),this.ship.level=n}if(!e){const n=this.sheetDrag.rowRefs[this.category].ships.indexOf(this.rowElement),o=this.sheetDrag.rows[this.category].ships;n<o.length-1?o[n+1].focusInput():this.levelInputElement.nativeElement.blur()}this.shipCategoryData.save()}focusInput(){this.levelInputElement.nativeElement.focus()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.TH),t.Y36(m.V),t.Y36(Z),t.Y36(_.i),t.Y36(T),t.Y36(k),t.Y36(t.SBq),t.Y36(l.IN),t.Y36(q),t.Y36(P))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-sheet-ship-row"]],viewQuery:function(e,n){if(1&e&&(t.Gf(ie,5,t.SBq),t.Gf(oe,5,t.SBq)),2&e){let o;t.iGM(o=t.CRH())&&(n.rowElement=o.first),t.iGM(o=t.CRH())&&(n.levelInputElement=o.first)}},inputs:{ship:"ship",category:"category"},decls:1,vars:1,consts:[[3,"class","style",4,"ngIf"],["row",""],[1,"ship-hull-icon",3,"title","src"],["class","ship-hull-icon",3,"title","style","src",4,"ngIf"],["class","ship-hull-icon FP",3,"title","style","src",4,"ngIf"],[1,"tech-bonus",3,"title"],["title","Click to edit level",3,"click"],[1,"ship-hull-icon","FP",3,"title","src"]],template:function(e,n){1&e&&t.YNc(0,ae,12,23,"div",0),2&e&&t.Q6J("ngIf",1==n.filter.shipFilterPass[n.ship.id])},directives:[c.O5],styles:[".slider[_ngcontent-%COMP%]{-webkit-appearance:none;width:calc(100% - 20px);margin-left:10px;margin-right:10px;margin-bottom:10px;height:5px;position:absolute;transform:translate(50%,-20px);right:0}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;width:20px;height:20px;background:white;transform:rotate(45deg);border:3px solid #6E7F9C;outline:1px solid white;cursor:pointer}.ship-hull-icon[_ngcontent-%COMP%]{width:24.5px;z-index:1;-webkit-user-select:none;user-select:none;-webkit-user-drag:none;margin-right:5px;transform:translateY(2px)}.ship-hull-icon.FP[_ngcontent-%COMP%]{transform:none}.tech-bonus[_ngcontent-%COMP%]{display:inline-block;font-size:13px;transform:translateY(-2px);color:#fff;-webkit-text-stroke:.65px black;font-weight:900}.tech-bonus.cell[_ngcontent-%COMP%]{width:57px;transform:none}.tech-stat[_ngcontent-%COMP%]{width:50px;text-align:right;height:100%;position:relative}",".dropping-left[_ngcontent-%COMP%]{width:15px;height:100%;background:lime;position:absolute;z-index:1;transform:translate(-15px)}.dropping-right[_ngcontent-%COMP%]{width:15px;height:100%;background:lime;position:absolute;right:0;z-index:1;transform:translate(15px)}.row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 0fr 0fr 0fr;position:relative;will-change:transform;-webkit-user-select:none;user-select:none}.row.dragged[_ngcontent-%COMP%]{z-index:99;position:absolute}.row.default[_ngcontent-%COMP%]{z-index:0}.row.highlight-true[_ngcontent-%COMP%]{border-bottom:5px solid #00ff0f}.row.highlight-top[_ngcontent-%COMP%]{border-top:5px solid #00ff0f}.level[_ngcontent-%COMP%]{width:40px;text-align:right;background-color:#ff4d4d;height:100%;position:relative;cursor:pointer}.level.over119-true[_ngcontent-%COMP%]{background-color:#49d049}.level.header[_ngcontent-%COMP%]{color:#fff}.level[_ngcontent-%COMP%]:focus{outline:5px solid white}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.ship-name[_ngcontent-%COMP%]{white-space:nowrap}.border[_ngcontent-%COMP%]{border:1.5px solid white;padding:2px 35px 2px 2px}.border.level[_ngcontent-%COMP%], .border.tech-stat[_ngcontent-%COMP%]{padding-right:5px}.border.highlight-top[_ngcontent-%COMP%]{border-top:5px solid #00ff0f}.border.highlight-bottom[_ngcontent-%COMP%]{border-bottom:5px solid #00ff0f}.border.createCategory[_ngcontent-%COMP%]{padding-right:5px;padding-left:5px;-webkit-user-select:none;user-select:none}.border.no-padding[_ngcontent-%COMP%]{padding-right:0}.scroll-container[_ngcontent-%COMP%]{width:100%;height:20px;background:red}.scroll-handle[_ngcontent-%COMP%]{background:green;height:10px}.adding-from-bottom[_ngcontent-%COMP%]{border:1.4px solid #00ff0f;background:#00ff0f}.category-header[_ngcontent-%COMP%]{background:#004299;cursor:pointer}.category-header.stat[_ngcontent-%COMP%]{color:#fff;width:50px}.Normal[_ngcontent-%COMP%]{background:#A5AAB5}.Rare[_ngcontent-%COMP%]{background:#6abff7}.Elite[_ngcontent-%COMP%]{background:#9b8eff}.Super-Rare[_ngcontent-%COMP%]{background:#ffd100}.Ultra-Rare[_ngcontent-%COMP%]{background:#ff6c4f}"]}),i})();const ce=["header"],ge=["categoryRef"];function pe(i,r){1&i&&t._UZ(0,"div",10)}function he(i,r){1&i&&t._UZ(0,"div",11)}function de(i,r){if(1&i&&t._UZ(0,"app-sheet-ship-row",13),2&i){const e=t.oxw().$implicit,n=t.oxw();t.Q6J("ship",e)("category",n.category)}}function ue(i,r){if(1&i&&(t.ynx(0),t.YNc(1,de,1,2,"app-sheet-ship-row",12),t.BQk()),2&i){const e=r.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngIf",1==n.filter.shipFilterPass[e.id])}}function fe(i,r){1&i&&(t.TgZ(0,"div",14,15),t.TgZ(2,"div",16),t._uU(3,"\xa0"),t.qZA(),t.qZA())}let me=(()=>{class i{constructor(e,n,o,s,a,g,u,C,d){this.filter=e,this.shipCategoryData=n,this.sheetDrag=o,this.categoryEditor=s,this.gestureController=a,this.selfRef=g,this.dragFuncs=u,this.sheetUI=C,this.zone=d,this.canOpenEditor=!0}ngOnInit(){this.dragElement={sheetUI:this.sheetUI}}ngAfterViewInit(){this.dragElement.gestureElement=this.headerElement,this.sheetDrag.headerRefs.push(this.headerElement),this.sheetDrag.categoryRefs.push(this.categoryElement),this.sheetDrag.categories.push(this);let e=!1;this.dragElement.gesture=this.gestureController.create({el:this.headerElement.nativeElement,gestureName:"element",threshold:0,onMove:n=>{if(e)this.sheetDrag.updateElementPos(this.dragElement),this.checkCategoryCollision();else if(Math.abs(n.deltaX)>2||Math.abs(n.deltaY)>2){if(null==this.dragElement.halfWidth){const s=this.dragFuncs.getHalfSizes(this.headerElement);this.dragElement.halfWidth=s[0],this.dragElement.halfHeight=s[1]}this.dragElement.mouse=n,e=!0;const o=this.shipCategoryData.categories;this.shipCategoryData.decrementSortIds(o[this.category].sortId),this.shipCategoryData.categories[this.category].sortId=Object.keys(o).length-1,this.shipCategoryData.sort(),this.sheetDrag.updateElementPos(this.dragElement)}},onEnd:()=>{!e||(e=!1,this.dragElement.transformX=0,this.dragElement.transformY=0,clearInterval(this.sheetDrag.scrollingInterval),this.categoryCollision(),this.canOpenEditor=!1,setTimeout(()=>{this.canOpenEditor=!0},500))}},!0)}checkCategoryCollision(){for(let e=0;e<this.sheetDrag.categoryRefs.length;e++){const n=this.sheetDrag.categoryRefs[e];if(n==this.categoryElement)continue;const o=n.nativeElement.getBoundingClientRect();if(this.dragFuncs.isColliding(o,this.dragElement.mouse)){null!=this.collidedCategory&&(this.collidedCategory.dragElement.droppingDir=0),this.collidedCategory=this.sheetDrag.categories[e],this.collidedCategory.dragElement.droppingDir=this.dragElement.mouse.currentX<this.dragFuncs.getHalfSizes(n)[0]+o.x?-1:1;break}}}categoryCollision(){null!=this.collidedCategory&&(this.shipCategoryData.categories[this.category].sortId=-1==this.collidedCategory.dragElement.droppingDir?this.shipCategoryData.categories[this.collidedCategory.category].sortId:this.shipCategoryData.categories[this.collidedCategory.category].sortId+1,this.collidedCategory.dragElement.droppingDir=0,this.shipCategoryData.incrementSortIds(this.shipCategoryData.categories[this.category].sortId,this.category),this.shipCategoryData.sort(),this.shipCategoryData.save())}openCategoryEditor(e){this.canOpenEditor&&this.categoryEditor.open(e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(_.i),t.Y36(m.V),t.Y36(k),t.Y36(M),t.Y36(l.TH),t.Y36(t.SBq),t.Y36(T),t.Y36(Z),t.Y36(t.R0b))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-sheet-category"]],viewQuery:function(e,n){if(1&e&&(t.Gf(ce,5),t.Gf(ge,5)),2&e){let o;t.iGM(o=t.CRH())&&(n.headerElement=o.first),t.iGM(o=t.CRH())&&(n.categoryElement=o.first)}},inputs:{category:"category",index:"index",isHeaderHighlighted:"isHeaderHighlighted",belowThisGrid:"belowThisGrid"},decls:14,vars:10,consts:[["categoryRef",""],["class","dropping-left",4,"ngIf"],["class","dropping-right",4,"ngIf"],[3,"click"],["header",""],["title","Click to edit category",1,"category-header","ship-name","border",2,"color","white"],[1,"category-header","stat","header","border","tech-stat"],[1,"category-header","level","header","border","level"],[4,"ngFor","ngForOf"],["class","adding-from-bottom",4,"ngIf"],[1,"dropping-left"],[1,"dropping-right"],[3,"ship","category",4,"ngIf"],[3,"ship","category"],[1,"adding-from-bottom"],["categoryHeaders",""],[2,"color","white"]],template:function(e,n){1&e&&(t.TgZ(0,"div",null,0),t.YNc(2,pe,1,0,"div",1),t.YNc(3,he,1,0,"div",2),t.TgZ(4,"div",3,4),t.NdJ("click",function(){return n.openCategoryEditor(n.category)}),t.TgZ(6,"div",5),t._uU(7),t.qZA(),t.TgZ(8,"div",6),t._uU(9,"Stat"),t.qZA(),t.TgZ(10,"div",7),t._uU(11,"Lv."),t.qZA(),t.qZA(),t.YNc(12,ue,2,1,"ng-container",8),t.YNc(13,fe,4,0,"div",9),t.qZA()),2&e&&(t.Akn("transform: translate("+n.dragElement.transformX+"px, "+n.dragElement.transformY+"px)"),t.xp6(2),t.Q6J("ngIf",-1==n.dragElement.droppingDir),t.xp6(1),t.Q6J("ngIf",1==n.dragElement.droppingDir),t.xp6(1),t.Gre("row highlight-",n.isHeaderHighlighted,""),t.xp6(3),t.Oqu(n.category),t.xp6(5),t.Q6J("ngForOf",n.shipCategoryData.categories[n.category].ships),t.xp6(1),t.Q6J("ngIf",n.belowThisGrid))},directives:[c.O5,c.sg,le],styles:[".dropping-left[_ngcontent-%COMP%]{width:15px;height:100%;background:lime;position:absolute;z-index:1;transform:translate(-15px)}.dropping-right[_ngcontent-%COMP%]{width:15px;height:100%;background:lime;position:absolute;right:0;z-index:1;transform:translate(15px)}.row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 0fr 0fr 0fr;position:relative;will-change:transform;-webkit-user-select:none;user-select:none}.row.dragged[_ngcontent-%COMP%]{z-index:99;position:absolute}.row.default[_ngcontent-%COMP%]{z-index:0}.row.highlight-true[_ngcontent-%COMP%]{border-bottom:5px solid #00ff0f}.row.highlight-top[_ngcontent-%COMP%]{border-top:5px solid #00ff0f}.level[_ngcontent-%COMP%]{width:40px;text-align:right;background-color:#ff4d4d;height:100%;position:relative;cursor:pointer}.level.over119-true[_ngcontent-%COMP%]{background-color:#49d049}.level.header[_ngcontent-%COMP%]{color:#fff}.level[_ngcontent-%COMP%]:focus{outline:5px solid white}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.ship-name[_ngcontent-%COMP%]{white-space:nowrap}.border[_ngcontent-%COMP%]{border:1.5px solid white;padding:2px 35px 2px 2px}.border.level[_ngcontent-%COMP%], .border.tech-stat[_ngcontent-%COMP%]{padding-right:5px}.border.highlight-top[_ngcontent-%COMP%]{border-top:5px solid #00ff0f}.border.highlight-bottom[_ngcontent-%COMP%]{border-bottom:5px solid #00ff0f}.border.createCategory[_ngcontent-%COMP%]{padding-right:5px;padding-left:5px;-webkit-user-select:none;user-select:none}.border.no-padding[_ngcontent-%COMP%]{padding-right:0}.scroll-container[_ngcontent-%COMP%]{width:100%;height:20px;background:red}.scroll-handle[_ngcontent-%COMP%]{background:green;height:10px}.adding-from-bottom[_ngcontent-%COMP%]{border:1.4px solid #00ff0f;background:#00ff0f}.category-header[_ngcontent-%COMP%]{background:#004299;cursor:pointer}.category-header.stat[_ngcontent-%COMP%]{color:#fff;width:50px}.Normal[_ngcontent-%COMP%]{background:#A5AAB5}.Rare[_ngcontent-%COMP%]{background:#6abff7}.Elite[_ngcontent-%COMP%]{background:#9b8eff}.Super-Rare[_ngcontent-%COMP%]{background:#ffd100}.Ultra-Rare[_ngcontent-%COMP%]{background:#ff6c4f}"]}),i})(),_e=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[M,O],imports:[[c.ez,f.u5,l.Pc,V]]}),i})();t.B6R(b,[l.W2,c.O5,O,Z],[]),t.B6R(O,[c.O5,c.sg,N,w,Y,At],[]),t.B6R(Z,[c.O5,N,Y,w,c.sg,me],[])}}]);